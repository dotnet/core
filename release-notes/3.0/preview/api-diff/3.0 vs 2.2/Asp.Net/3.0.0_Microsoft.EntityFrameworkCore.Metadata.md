# Microsoft.EntityFrameworkCore.Metadata

``` diff
 namespace Microsoft.EntityFrameworkCore.Metadata {
+    public enum ConfigurationSource {
+        Convention = 2,
+        DataAnnotation = 1,
+        Explicit = 0,
+    }
+    public static class ConfigurationSourceExtensions {
+        public static bool Overrides(this ConfigurationSource newConfigurationSource, Nullable<ConfigurationSource> oldConfigurationSource);
+        public static bool Overrides(this Nullable<ConfigurationSource> newConfigurationSource, Nullable<ConfigurationSource> oldConfigurationSource);
+        public static bool OverridesStrictly(this ConfigurationSource newConfigurationSource, Nullable<ConfigurationSource> oldConfigurationSource);
+        public static bool OverridesStrictly(this Nullable<ConfigurationSource> newConfigurationSource, Nullable<ConfigurationSource> oldConfigurationSource);
+    }
+    public class ConstructorBinding : InstantiationBinding {
+        public ConstructorBinding(ConstructorInfo constructor, IReadOnlyList<ParameterBinding> parameterBindings);
+        public virtual ConstructorInfo Constructor { get; }
+        public override Type RuntimeType { get; }
+        public override Expression CreateConstructorExpression(ParameterBindingInfo bindingInfo);
+    }
+    public class ContextParameterBinding : ServiceParameterBinding {
+        public ContextParameterBinding(Type contextType, IPropertyBase serviceProperty = null);
+        public override Expression BindToParameter(Expression materializationExpression, Expression entityTypeExpression);
+    }
+    public class DependencyInjectionMethodParameterBinding : DependencyInjectionParameterBinding {
+        public DependencyInjectionMethodParameterBinding(Type parameterType, Type serviceType, MethodInfo method, IPropertyBase serviceProperty = null);
+        public virtual MethodInfo Method { get; }
+        public override Expression BindToParameter(Expression materializationExpression, Expression entityTypeExpression);
+    }
+    public class DependencyInjectionParameterBinding : ServiceParameterBinding {
+        public DependencyInjectionParameterBinding(Type parameterType, Type serviceType, IPropertyBase serviceProperty = null);
+        public override Expression BindToParameter(Expression materializationExpression, Expression entityTypeExpression);
+    }
+    public class EntityTypeParameterBinding : ServiceParameterBinding {
+        public EntityTypeParameterBinding(IPropertyBase serviceProperty = null);
+        public override Expression BindToParameter(Expression materializationExpression, Expression entityTypeExpression);
+    }
+    public class FactoryMethodBinding : InstantiationBinding {
+        public FactoryMethodBinding(object factoryInstance, MethodInfo factoryMethod, IReadOnlyList<ParameterBinding> parameterBindings, Type runtimeType);
+        public FactoryMethodBinding(MethodInfo factoryMethod, IReadOnlyList<ParameterBinding> parameterBindings, Type runtimeType);
+        public override Type RuntimeType { get; }
+        public override Expression CreateConstructorExpression(ParameterBindingInfo bindingInfo);
+    }
+    public interface ICheckConstraint {
+        IEntityType EntityType { get; }
+        string Name { get; }
+        string Sql { get; }
+    }
+    public interface IClrCollectionAccessor {
+        Type CollectionType { get; }
+        bool Add(object entity, object value, bool forMaterialization);
+        bool Contains(object entity, object value);
+        object Create();
+        object GetOrCreate(object entity, bool forMaterialization);
+        bool Remove(object entity, object value);
+    }
+    public interface IClrPropertyGetter {
+        object GetClrValue(object entity);
+        bool HasDefaultValue(object entity);
+    }
+    public interface IClrPropertySetter {
+        void SetClrValue(object instance, object value);
+    }
+    public interface IConstructorBindingFactory {
+        bool TryBindConstructor(IConventionEntityType entityType, ConstructorInfo constructor, out InstantiationBinding binding, out IEnumerable<ParameterInfo> unboundParameters);
+        bool TryBindConstructor(IMutableEntityType entityType, ConstructorInfo constructor, out InstantiationBinding binding, out IEnumerable<ParameterInfo> unboundParameters);
+    }
+    public interface IConventionAnnotatable : IAnnotatable {
+        IConventionAnnotation AddAnnotation(string name, object value, bool fromDataAnnotation = false);
+        new IConventionAnnotation FindAnnotation(string name);
+        new IEnumerable<IConventionAnnotation> GetAnnotations();
+        IConventionAnnotation RemoveAnnotation(string name);
+        void SetAnnotation(string name, object value, bool fromDataAnnotation = false);
+    }
+    public interface IConventionAnnotation : IAnnotation {
+        ConfigurationSource GetConfigurationSource();
+    }
+    public interface IConventionCheckConstraint : ICheckConstraint {
+        new IConventionEntityType EntityType { get; }
+        ConfigurationSource GetConfigurationSource();
+    }
+    public interface IConventionDbFunction : IDbFunction {
+        IConventionDbFunctionBuilder Builder { get; }
+        new IConventionModel Model { get; }
+        new IReadOnlyList<IConventionDbFunctionParameter> Parameters { get; }
+        ConfigurationSource GetConfigurationSource();
+        Nullable<ConfigurationSource> GetNameConfigurationSource();
+        Nullable<ConfigurationSource> GetSchemaConfigurationSource();
+        Nullable<ConfigurationSource> GetStoreTypeConfigurationSource();
+        Nullable<ConfigurationSource> GetTranslationConfigurationSource();
+        Nullable<ConfigurationSource> GetTypeMappingConfigurationSource();
+        void SetName(string name, bool fromDataAnnotation = false);
+        void SetSchema(string schema, bool fromDataAnnotation = false);
+        void SetStoreType(string storeType, bool fromDataAnnotation = false);
+        void SetTranslation(Func<IReadOnlyCollection<SqlExpression>, SqlExpression> translation, bool fromDataAnnotation = false);
+        void SetTypeMapping(RelationalTypeMapping typeMapping, bool fromDataAnnotation = false);
+    }
+    public interface IConventionDbFunctionParameter : IDbFunctionParameter {
+        IConventionDbFunctionParameterBuilder Builder { get; }
+        new IConventionDbFunction Function { get; }
+        Nullable<ConfigurationSource> GetStoreTypeConfigurationSource();
+        Nullable<ConfigurationSource> GetTypeMappingConfigurationSource();
+        void SetStoreType(string storeType, bool fromDataAnnotation = false);
+        void SetTypeMapping(RelationalTypeMapping typeMapping, bool fromDataAnnotation = false);
+    }
+    public interface IConventionDbFunctionParameterBuilder {
+        IConventionDbFunctionParameter Metadata { get; }
+        bool CanSetStoreType(string storeType, bool fromDataAnnotation = false);
+        bool CanSetTypeMapping(RelationalTypeMapping typeMapping, bool fromDataAnnotation = false);
+        IConventionDbFunctionParameterBuilder HasStoreType(string storeType, bool fromDataAnnotation = false);
+        IConventionDbFunctionParameterBuilder HasTypeMapping(RelationalTypeMapping typeMapping, bool fromDataAnnotation = false);
+    }
+    public interface IConventionEntityType : IAnnotatable, IConventionAnnotatable, IConventionTypeBase, IEntityType, ITypeBase {
+        new IConventionEntityType BaseType { get; }
+        IConventionEntityTypeBuilder Builder { get; }
+        new IConventionEntityType DefiningEntityType { get; }
+        bool IsKeyless { get; }
+        new IConventionModel Model { get; }
+        IConventionForeignKey AddForeignKey(IReadOnlyList<IConventionProperty> properties, IConventionKey principalKey, IConventionEntityType principalEntityType, bool setComponentConfigurationSource = true, bool fromDataAnnotation = false);
+        IConventionIndex AddIndex(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        IConventionKey AddKey(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        IConventionProperty AddProperty(string name, Type propertyType, MemberInfo memberInfo, bool setTypeConfigurationSource = true, bool fromDataAnnotation = false);
+        IConventionServiceProperty AddServiceProperty(MemberInfo memberInfo, bool fromDataAnnotation = false);
+        new IConventionForeignKey FindForeignKey(IReadOnlyList<IProperty> properties, IKey principalKey, IEntityType principalEntityType);
+        new IConventionIndex FindIndex(IReadOnlyList<IProperty> properties);
+        new IConventionKey FindKey(IReadOnlyList<IProperty> properties);
+        new IConventionKey FindPrimaryKey();
+        new IConventionProperty FindProperty(string name);
+        new IConventionServiceProperty FindServiceProperty(string name);
+        ConfigurationSource GetConfigurationSource();
+        new IEnumerable<IConventionForeignKey> GetForeignKeys();
+        new IEnumerable<IConventionIndex> GetIndexes();
+        new IEnumerable<IConventionKey> GetKeys();
+        Nullable<ConfigurationSource> GetPrimaryKeyConfigurationSource();
+        new IEnumerable<IConventionProperty> GetProperties();
+        new IEnumerable<IConventionServiceProperty> GetServiceProperties();
+        void HasBaseType(IConventionEntityType entityType, bool fromDataAnnotation = false);
+        void HasNoKey(Nullable<bool> keyless, bool fromDataAnnotation = false);
+        void RemoveForeignKey(IConventionForeignKey foreignKey);
+        void RemoveIndex(IConventionIndex index);
+        void RemoveKey(IConventionKey key);
+        void RemoveProperty(IConventionProperty property);
+        IConventionServiceProperty RemoveServiceProperty(string name);
+        IConventionKey SetPrimaryKey(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+    }
+    public interface IConventionForeignKey : IAnnotatable, IConventionAnnotatable, IForeignKey {
+        IConventionRelationshipBuilder Builder { get; }
+        new IConventionEntityType DeclaringEntityType { get; }
+        new IConventionNavigation DependentToPrincipal { get; }
+        new IConventionEntityType PrincipalEntityType { get; }
+        new IConventionKey PrincipalKey { get; }
+        new IConventionNavigation PrincipalToDependent { get; }
+        new IReadOnlyList<IConventionProperty> Properties { get; }
+        ConfigurationSource GetConfigurationSource();
+        Nullable<ConfigurationSource> GetDeleteBehaviorConfigurationSource();
+        Nullable<ConfigurationSource> GetDependentToPrincipalConfigurationSource();
+        Nullable<ConfigurationSource> GetIsOwnershipConfigurationSource();
+        Nullable<ConfigurationSource> GetIsRequiredConfigurationSource();
+        Nullable<ConfigurationSource> GetIsUniqueConfigurationSource();
+        Nullable<ConfigurationSource> GetPrincipalEndConfigurationSource();
+        Nullable<ConfigurationSource> GetPrincipalKeyConfigurationSource();
+        Nullable<ConfigurationSource> GetPrincipalToDependentConfigurationSource();
+        Nullable<ConfigurationSource> GetPropertiesConfigurationSource();
+        IConventionNavigation HasDependentToPrincipal(MemberInfo property, bool fromDataAnnotation = false);
+        IConventionNavigation HasDependentToPrincipal(string name, bool fromDataAnnotation = false);
+        IConventionNavigation HasPrincipalToDependent(MemberInfo property, bool fromDataAnnotation = false);
+        IConventionNavigation HasPrincipalToDependent(string name, bool fromDataAnnotation = false);
+        void SetDeleteBehavior(Nullable<DeleteBehavior> deleteBehavior, bool fromDataAnnotation = false);
+        void SetIsOwnership(Nullable<bool> ownership, bool fromDataAnnotation = false);
+        void SetIsRequired(Nullable<bool> required, bool fromDataAnnotation = false);
+        void SetIsUnique(Nullable<bool> unique, bool fromDataAnnotation = false);
+        void SetProperties(IReadOnlyList<IConventionProperty> properties, IConventionKey principalKey, bool fromDataAnnotation = false);
+    }
+    public interface IConventionIndex : IAnnotatable, IConventionAnnotatable, IIndex {
+        IConventionIndexBuilder Builder { get; }
+        new IConventionEntityType DeclaringEntityType { get; }
+        new IReadOnlyList<IConventionProperty> Properties { get; }
+        ConfigurationSource GetConfigurationSource();
+        Nullable<ConfigurationSource> GetIsUniqueConfigurationSource();
+        void SetIsUnique(Nullable<bool> unique, bool fromDataAnnotation = false);
+    }
+    public interface IConventionKey : IAnnotatable, IConventionAnnotatable, IKey {
+        IConventionKeyBuilder Builder { get; }
+        new IConventionEntityType DeclaringEntityType { get; }
+        new IReadOnlyList<IConventionProperty> Properties { get; }
+        ConfigurationSource GetConfigurationSource();
+    }
+    public interface IConventionModel : IAnnotatable, IConventionAnnotatable, IModel {
+        IConventionModelBuilder Builder { get; }
+        IConventionEntityType AddEntityType(string name, bool fromDataAnnotation = false);
+        IConventionEntityType AddEntityType(string name, string definingNavigationName, IConventionEntityType definingEntityType, bool fromDataAnnotation = false);
+        IConventionEntityType AddEntityType(Type clrType, bool fromDataAnnotation = false);
+        IConventionEntityType AddEntityType(Type clrType, string definingNavigationName, IConventionEntityType definingEntityType, bool fromDataAnnotation = false);
+        void AddIgnored(string typeName, bool fromDataAnnotation = false);
+        new IConventionEntityType FindEntityType(string name);
+        IConventionEntityType FindEntityType(string name, string definingNavigationName, IConventionEntityType definingEntityType);
+        Nullable<ConfigurationSource> FindIgnoredConfigurationSource(string typeName);
+        new IEnumerable<IConventionEntityType> GetEntityTypes();
+        void RemoveEntityType(IConventionEntityType entityType);
+        void RemoveIgnored(string typeName);
+    }
+    public interface IConventionNavigation : IAnnotatable, IConventionAnnotatable, IConventionPropertyBase, INavigation, IPropertyBase {
+        new IConventionEntityType DeclaringEntityType { get; }
+        new IConventionForeignKey ForeignKey { get; }
+    }
+    public interface IConventionProperty : IAnnotatable, IConventionAnnotatable, IConventionPropertyBase, IProperty, IPropertyBase {
+        IConventionPropertyBuilder Builder { get; }
+        new IConventionEntityType DeclaringEntityType { get; }
+        ConfigurationSource GetConfigurationSource();
+        Nullable<ConfigurationSource> GetIsConcurrencyTokenConfigurationSource();
+        Nullable<ConfigurationSource> GetIsNullableConfigurationSource();
+        Nullable<ConfigurationSource> GetTypeConfigurationSource();
+        Nullable<ConfigurationSource> GetValueGeneratedConfigurationSource();
+        void SetIsConcurrencyToken(Nullable<bool> concurrencyToken, bool fromDataAnnotation = false);
+        void SetIsNullable(Nullable<bool> nullable, bool fromDataAnnotation = false);
+        void SetValueGenerated(Nullable<ValueGenerated> valueGenerated, bool fromDataAnnotation = false);
+    }
+    public interface IConventionPropertyBase : IAnnotatable, IConventionAnnotatable, IPropertyBase {
+        new IConventionTypeBase DeclaringType { get; }
+        Nullable<ConfigurationSource> GetFieldInfoConfigurationSource();
+        void SetField(FieldInfo fieldInfo, bool fromDataAnnotation = false);
+    }
+    public interface IConventionSequence : ISequence {
+        IConventionSequenceBuilder Builder { get; }
+        new IConventionModel Model { get; }
+        Nullable<ConfigurationSource> GetClrTypeConfigurationSource();
+        ConfigurationSource GetConfigurationSource();
+        Nullable<ConfigurationSource> GetIncrementByConfigurationSource();
+        Nullable<ConfigurationSource> GetIsCyclicConfigurationSource();
+        Nullable<ConfigurationSource> GetMaxValueConfigurationSource();
+        Nullable<ConfigurationSource> GetMinValueConfigurationSource();
+        Nullable<ConfigurationSource> GetStartValueConfigurationSource();
+        void SetClrType(Type clrType, bool fromDataAnnotation = false);
+        void SetIncrementBy(Nullable<int> incrementBy, bool fromDataAnnotation = false);
+        void SetIsCyclic(Nullable<bool> cyclic, bool fromDataAnnotation = false);
+        void SetMaxValue(Nullable<long> maxValue, bool fromDataAnnotation = false);
+        void SetMinValue(Nullable<long> minValue, bool fromDataAnnotation = false);
+        void SetStartValue(Nullable<long> startValue, bool fromDataAnnotation = false);
+    }
+    public interface IConventionServiceProperty : IAnnotatable, IConventionAnnotatable, IConventionPropertyBase, IPropertyBase, IServiceProperty {
+        IConventionServicePropertyBuilder Builder { get; }
+        new IConventionEntityType DeclaringEntityType { get; }
+        ConfigurationSource GetConfigurationSource();
+        Nullable<ConfigurationSource> GetParameterBindingConfigurationSource();
+        void SetParameterBinding(ServiceParameterBinding parameterBinding, bool fromDataAnnotation = false);
+    }
+    public interface IConventionTypeBase : IAnnotatable, IConventionAnnotatable, ITypeBase {
+        new IConventionModel Model { get; }
+        void AddIgnored(string memberName, bool fromDataAnnotation = false);
+        Nullable<ConfigurationSource> FindIgnoredConfigurationSource(string memberName);
+        IReadOnlyList<string> GetIgnoredMembers();
+        void RemoveIgnored(string memberName);
+    }
     public interface IDbFunction {
-        string FunctionName { get; }

+        IModel Model { get; }
+        string Name { get; }
+        IReadOnlyList<IDbFunctionParameter> Parameters { get; }
+        string StoreType { get; }
-        Func<IReadOnlyCollection<Expression>, Expression> Translation { get; }
+        Func<IReadOnlyCollection<SqlExpression>, SqlExpression> Translation { get; }
+        RelationalTypeMapping TypeMapping { get; }
     }
+    public interface IDbFunctionParameter {
+        Type ClrType { get; }
+        IDbFunction Function { get; }
+        string Name { get; }
+        string StoreType { get; }
+        RelationalTypeMapping TypeMapping { get; }
+    }
     public interface IEntityType : IAnnotatable, ITypeBase {
-        LambdaExpression DefiningQuery { get; }

-        bool IsQueryType { get; }

-        LambdaExpression QueryFilter { get; }

     }
+    public interface IMetadataReference<out T> : IDisposable {
+        T Object { get; }
+    }
     public interface IMutableAnnotatable : IAnnotatable {
-        Annotation AddAnnotation(string name, object value);

+        IAnnotation AddAnnotation(string name, object value);
-        new Annotation FindAnnotation(string name);

-        new IEnumerable<Annotation> GetAnnotations();

-        Annotation RemoveAnnotation(string name);

+        IAnnotation RemoveAnnotation(string name);
     }
     public interface IMutableDbFunction : IDbFunction {
-        new string FunctionName { get; set; }

+        new IMutableModel Model { get; }
+        new string Name { get; set; }
+        new string StoreType { get; set; }
-        new Func<IReadOnlyCollection<Expression>, Expression> Translation { get; set; }
+        new Func<IReadOnlyCollection<SqlExpression>, SqlExpression> Translation { get; set; }
+        new RelationalTypeMapping TypeMapping { get; set; }
     }
+    public interface IMutableDbFunctionParameter : IDbFunctionParameter {
+        new IMutableDbFunction Function { get; }
+        new string StoreType { get; set; }
+        new RelationalTypeMapping TypeMapping { get; set; }
+    }
     public interface IMutableEntityType : IAnnotatable, IEntityType, IMutableAnnotatable, IMutableTypeBase, ITypeBase {
+        new IMutableEntityType DefiningEntityType { get; }
-        new LambdaExpression DefiningQuery { get; set; }

+        bool IsKeyless { get; set; }
-        new bool IsQueryType { get; set; }

-        new LambdaExpression QueryFilter { get; set; }

-        IMutableProperty AddProperty(string name, Type propertyType);

+        IMutableProperty AddProperty(string name, Type propertyType, MemberInfo memberInfo);
+        void RemoveForeignKey(IMutableForeignKey foreignKey);
-        IMutableForeignKey RemoveForeignKey(IReadOnlyList<IProperty> properties, IKey principalKey, IEntityType principalEntityType);

+        void RemoveIndex(IMutableIndex index);
-        IMutableIndex RemoveIndex(IReadOnlyList<IProperty> properties);

+        void RemoveKey(IMutableKey key);
-        IMutableKey RemoveKey(IReadOnlyList<IProperty> properties);

+        void RemoveProperty(IMutableProperty property);
-        IMutableProperty RemoveProperty(string name);

     }
     public interface IMutableForeignKey : IAnnotatable, IForeignKey, IMutableAnnotatable {
+        IMutableNavigation HasDependentToPrincipal(MemberInfo property);
-        IMutableNavigation HasDependentToPrincipal(PropertyInfo property);

+        IMutableNavigation HasPrincipalToDependent(MemberInfo property);
-        IMutableNavigation HasPrincipalToDependent(PropertyInfo property);

+        void SetProperties(IReadOnlyList<IMutableProperty> properties, IMutableKey principalKey);
     }
     public interface IMutableModel : IAnnotatable, IModel, IMutableAnnotatable {
+        void AddIgnored(string typeName);
-        IMutableEntityType AddQueryType(Type type);

+        bool IsIgnored(string typeName);
+        void RemoveEntityType(IMutableEntityType entityType);
-        IMutableEntityType RemoveEntityType(string name);

-        IMutableEntityType RemoveEntityType(string name, string definingNavigationName, IMutableEntityType definingEntityType);

+        void RemoveIgnored(string typeName);
     }
     public interface IMutableNavigation : IAnnotatable, IMutableAnnotatable, IMutablePropertyBase, INavigation, IPropertyBase {
-        new bool IsEagerLoaded { get; set; }

     }
     public interface IMutableProperty : IAnnotatable, IMutableAnnotatable, IMutablePropertyBase, IProperty, IPropertyBase {
-        new PropertySaveBehavior AfterSaveBehavior { get; set; }

-        new PropertySaveBehavior BeforeSaveBehavior { get; set; }

-        new bool IsReadOnlyAfterSave { get; set; }

-        new bool IsReadOnlyBeforeSave { get; set; }

-        new bool IsStoreGeneratedAlways { get; set; }

     }
     public interface IMutablePropertyBase : IAnnotatable, IMutableAnnotatable, IPropertyBase {
+        new FieldInfo FieldInfo { get; set; }
     }
     public interface IMutableSequence : ISequence {
-        new long? MaxValue { get; set; }
+        new Nullable<long> MaxValue { get; set; }
-        new long? MinValue { get; set; }
+        new Nullable<long> MinValue { get; set; }
+        new IMutableModel Model { get; }
     }
     public interface IMutableServiceProperty : IAnnotatable, IMutableAnnotatable, IMutablePropertyBase, IPropertyBase, IServiceProperty {
+        new ServiceParameterBinding ParameterBinding { get; set; }
     }
     public interface IMutableTypeBase : IAnnotatable, IMutableAnnotatable, ITypeBase {
+        void AddIgnored(string memberName);
+        IReadOnlyList<string> GetIgnoredMembers();
+        bool IsIgnored(string memberName);
+        void RemoveIgnored(string memberName);
     }
     public interface INavigation : IAnnotatable, IPropertyBase {
-        bool IsEagerLoaded { get; }

     }
+    public abstract class InstantiationBinding {
+        protected InstantiationBinding(IReadOnlyList<ParameterBinding> parameterBindings);
+        public virtual IReadOnlyList<ParameterBinding> ParameterBindings { get; }
+        public abstract Type RuntimeType { get; }
+        public abstract Expression CreateConstructorExpression(ParameterBindingInfo bindingInfo);
+    }
+    public interface IParameterBindingFactories {
+        IParameterBindingFactory FindFactory(Type parameterType, string parameterName);
+    }
+    public interface IParameterBindingFactory {
+        ParameterBinding Bind(IConventionEntityType entityType, Type parameterType, string parameterName);
+        ParameterBinding Bind(IMutableEntityType entityType, Type parameterType, string parameterName);
+        bool CanBind(Type parameterType, string parameterName);
+    }
     public interface IProperty : IAnnotatable, IPropertyBase {
-        PropertySaveBehavior AfterSaveBehavior { get; }

-        PropertySaveBehavior BeforeSaveBehavior { get; }

-        new Type ClrType { get; }

-        bool IsReadOnlyAfterSave { get; }

-        bool IsReadOnlyBeforeSave { get; }

-        new bool IsShadowProperty { get; }

-        bool IsStoreGeneratedAlways { get; }

     }
     public interface IPropertyBase : IAnnotatable {
-        bool IsShadowProperty { get; }

     }
+    public interface IPropertyParameterBindingFactory {
+        ParameterBinding FindParameter(IEntityType entityType, Type parameterType, string parameterName);
+    }
-    public interface IRelationalEntityTypeAnnotations {
 {
-        IProperty DiscriminatorProperty { get; }

-        object DiscriminatorValue { get; }

-        string Schema { get; }

-        string TableName { get; }

-    }
-    public interface IRelationalForeignKeyAnnotations {
 {
-        string Name { get; }

-    }
-    public interface IRelationalIndexAnnotations {
 {
-        string Filter { get; }

-        string Name { get; }

-    }
-    public interface IRelationalKeyAnnotations {
 {
-        string Name { get; }

-    }
-    public interface IRelationalModelAnnotations {
 {
-        IReadOnlyList<IDbFunction> DbFunctions { get; }

-        string DefaultSchema { get; }

-        IReadOnlyList<ISequence> Sequences { get; }

-        IDbFunction FindDbFunction(MethodInfo method);

-        ISequence FindSequence(string name, string schema = null);

-    }
-    public interface IRelationalPropertyAnnotations {
 {
-        string ColumnName { get; }

-        string ColumnType { get; }

-        string ComputedColumnSql { get; }

-        object DefaultValue { get; }

-        string DefaultValueSql { get; }

-        bool IsFixedLength { get; }

-    }
     public interface ISequence {
-        long? MaxValue { get; }
+        Nullable<long> MaxValue { get; }
-        long? MinValue { get; }
+        Nullable<long> MinValue { get; }
     }
     public interface IServiceProperty : IAnnotatable, IPropertyBase {
+        ServiceParameterBinding ParameterBinding { get; }
     }
-    public interface ISqlitePropertyAnnotations : IRelationalPropertyAnnotations {
 {
-        string Dimension { get; }

-        int? Srid { get; }

-    }
-    public interface ISqlServerEntityTypeAnnotations : IRelationalEntityTypeAnnotations {
 {
-        bool IsMemoryOptimized { get; }

-    }
-    public interface ISqlServerIndexAnnotations : IRelationalIndexAnnotations {
 {
-        IReadOnlyList<string> IncludeProperties { get; }

-        bool? IsClustered { get; }

-    }
-    public interface ISqlServerKeyAnnotations : IRelationalKeyAnnotations {
 {
-        bool? IsClustered { get; }

-    }
-    public interface ISqlServerModelAnnotations : IRelationalModelAnnotations {
 {
-        string HiLoSequenceName { get; }

-        string HiLoSequenceSchema { get; }

-        SqlServerValueGenerationStrategy? ValueGenerationStrategy { get; }

-    }
-    public interface ISqlServerPropertyAnnotations : IRelationalPropertyAnnotations {
 {
-        string HiLoSequenceName { get; }

-        string HiLoSequenceSchema { get; }

-        SqlServerValueGenerationStrategy? ValueGenerationStrategy { get; }

-        ISequence FindHiLoSequence();

-    }
+    public class LazyLoaderParameterBindingFactory : ServiceParameterBindingFactory {
+        public LazyLoaderParameterBindingFactory(LazyLoaderParameterBindingFactoryDependencies dependencies);
+        public override ParameterBinding Bind(IConventionEntityType entityType, Type parameterType, string parameterName);
+        public override ParameterBinding Bind(IMutableEntityType entityType, Type parameterType, string parameterName);
+        public override bool CanBind(Type parameterType, string parameterName);
+    }
+    public sealed class LazyLoaderParameterBindingFactoryDependencies {
+        public LazyLoaderParameterBindingFactoryDependencies();
+    }
+    public readonly struct MemberIdentity {
+        public static readonly MemberIdentity None;
+        public MemberIdentity(MemberInfo memberInfo);
+        public MemberIdentity(string name);
+        public MemberInfo MemberInfo { get; }
+        public string Name { get; }
+        public static MemberIdentity Create(MemberInfo member);
+        public static MemberIdentity Create(string name);
+        public bool IsNone();
+    }
+    public class ObjectArrayParameterBinding : ParameterBinding {
+        public ObjectArrayParameterBinding(IReadOnlyList<ParameterBinding> bindings);
+        public override Expression BindToParameter(ParameterBindingInfo bindingInfo);
+    }
+    public abstract class ParameterBinding {
+        protected ParameterBinding(Type parameterType, params IPropertyBase[] consumedProperties);
+        public virtual IReadOnlyList<IPropertyBase> ConsumedProperties { get; }
+        public virtual Type ParameterType { get; }
+        public abstract Expression BindToParameter(ParameterBindingInfo bindingInfo);
+    }
+    public readonly struct ParameterBindingInfo {
+        public ParameterBindingInfo(IEntityType entityType, Expression materializationContextExpression);
+        public IEntityType EntityType { get; }
+        public Expression MaterializationContextExpression { get; }
+        public int GetValueBufferIndex(IPropertyBase property);
+    }
+    public class PropertyParameterBinding : ParameterBinding {
+        public PropertyParameterBinding(IProperty property);
+        public override Expression BindToParameter(ParameterBindingInfo bindingInfo);
+    }
     public static class RelationalAnnotationNames {
+        public const string CheckConstraints = "Relational:CheckConstraints";
+        public const string Comment = "Relational:Comment";
-        public const string DiscriminatorProperty = "Relational:DiscriminatorProperty";

-        public const string DiscriminatorValue = "Relational:DiscriminatorValue";

-        public const string TypeMapping = "Relational:TypeMapping";

+        public const string ViewDefinition = "Relational:ViewDefinition";
     }
-    public class RelationalAnnotations {
 {
-        public RelationalAnnotations(IAnnotatable metadata);

-        public virtual IAnnotatable Metadata { get; }

-        public virtual bool CanSetAnnotation(string relationalAnnotationName, object value);

-        public virtual bool RemoveAnnotation(string annotationName);

-        public virtual bool SetAnnotation(string annotationName, object value);

-    }
-    public class RelationalEntityTypeAnnotations : IRelationalEntityTypeAnnotations {
 {
-        public RelationalEntityTypeAnnotations(IEntityType entityType);

-        protected RelationalEntityTypeAnnotations(RelationalAnnotations annotations);

-        protected virtual RelationalAnnotations Annotations { get; }

-        public virtual IProperty DiscriminatorProperty { get; set; }

-        public virtual object DiscriminatorValue { get; set; }

-        protected virtual IEntityType EntityType { get; }

-        public virtual string Schema { get; set; }

-        public virtual string TableName { get; set; }

-        protected virtual RelationalEntityTypeAnnotations GetAnnotations(IEntityType entityType);

-        protected virtual RelationalModelAnnotations GetAnnotations(IModel model);

-        protected virtual ConfigurationSource? GetDiscriminatorPropertyConfigurationSource();

-        protected virtual ConfigurationSource? GetDiscriminatorValueConfigurationSource();

-        protected virtual IProperty GetNonRootDiscriminatorProperty();

-        protected virtual bool RemoveDiscriminatorValue();

-        protected virtual bool SetDiscriminatorProperty(IProperty value);

-        protected virtual bool SetDiscriminatorProperty(IProperty value, Type oldDiscriminatorType);

-        protected virtual bool SetDiscriminatorValue(object value);

-        protected virtual bool SetSchema(string value);

-        protected virtual bool SetTableName(string value);

-    }
-    public class RelationalForeignKeyAnnotations : IRelationalForeignKeyAnnotations {
 {
-        public RelationalForeignKeyAnnotations(IForeignKey foreignKey);

-        protected RelationalForeignKeyAnnotations(RelationalAnnotations annotations);

-        protected virtual RelationalAnnotations Annotations { get; }

-        protected virtual IForeignKey ForeignKey { get; }

-        public virtual string Name { get; set; }

-        protected virtual bool SetName(string value);

-    }
-    public class RelationalIndexAnnotations : IRelationalIndexAnnotations {
 {
-        public RelationalIndexAnnotations(IIndex index);

-        protected RelationalIndexAnnotations(RelationalAnnotations annotations);

-        protected virtual RelationalAnnotations Annotations { get; }

-        public virtual string Filter { get; set; }

-        protected virtual IIndex Index { get; }

-        public virtual string Name { get; set; }

-        protected virtual bool SetFilter(string value);

-        protected virtual bool SetName(string value);

-    }
-    public class RelationalKeyAnnotations : IRelationalKeyAnnotations {
 {
-        public RelationalKeyAnnotations(IKey key);

-        protected RelationalKeyAnnotations(RelationalAnnotations annotations);

-        protected virtual RelationalAnnotations Annotations { get; }

-        protected virtual IKey Key { get; }

-        public virtual string Name { get; set; }

-        protected virtual bool SetName(string value);

-    }
-    public class RelationalModelAnnotations : IRelationalModelAnnotations {
 {
-        public RelationalModelAnnotations(IModel model);

-        protected RelationalModelAnnotations(RelationalAnnotations annotations);

-        protected virtual RelationalAnnotations Annotations { get; }

-        public virtual IReadOnlyList<IDbFunction> DbFunctions { get; }

-        public virtual string DefaultSchema { get; set; }

-        public virtual int MaxIdentifierLength { get; set; }

-        IReadOnlyList<ISequence> Microsoft.EntityFrameworkCore.Metadata.IRelationalModelAnnotations.Sequences { get; }

-        protected virtual IModel Model { get; }

-        public virtual IReadOnlyList<IMutableSequence> Sequences { get; }

-        public virtual IDbFunction FindDbFunction(MethodInfo methodInfo);

-        public virtual IMutableSequence FindSequence(string name, string schema = null);

-        public virtual DbFunction GetOrAddDbFunction(MethodInfo methodInfo);

-        public virtual IMutableSequence GetOrAddSequence(string name, string schema = null);

-        ISequence Microsoft.EntityFrameworkCore.Metadata.IRelationalModelAnnotations.FindSequence(string name, string schema);

-        protected virtual bool SetDefaultSchema(string value);

-        protected virtual bool SetMaxIdentifierLength(int? value);

-    }
-    public class RelationalPropertyAnnotations : IRelationalPropertyAnnotations {
 {
-        public RelationalPropertyAnnotations(IProperty property);

-        protected RelationalPropertyAnnotations(RelationalAnnotations annotations);

-        protected virtual RelationalAnnotations Annotations { get; }

-        public virtual string ColumnName { get; set; }

-        public virtual string ColumnType { get; set; }

-        public virtual string ComputedColumnSql { get; set; }

-        public virtual object DefaultValue { get; set; }

-        public virtual string DefaultValueSql { get; set; }

-        public virtual bool IsFixedLength { get; set; }

-        protected virtual IProperty Property { get; }

-        protected virtual bool ShouldThrowOnConflict { get; }

-        protected virtual bool ShouldThrowOnInvalidConfiguration { get; }

-        protected virtual bool CanSetComputedColumnSql(string value);

-        protected virtual bool CanSetDefaultValue(object value);

-        protected virtual bool CanSetDefaultValueSql(string value);

-        protected virtual void ClearAllServerGeneratedValues();

-        protected virtual RelationalEntityTypeAnnotations GetAnnotations(IEntityType entityType);

-        protected virtual RelationalPropertyAnnotations GetAnnotations(IProperty property);

-        protected virtual string GetComputedColumnSql(bool fallback);

-        protected virtual object GetDefaultValue(bool fallback);

-        protected virtual string GetDefaultValueSql(bool fallback);

-        protected virtual bool SetColumnName(string value);

-        protected virtual bool SetColumnType(string value);

-        protected virtual bool SetComputedColumnSql(string value);

-        protected virtual bool SetDefaultValue(object value);

-        protected virtual bool SetDefaultValueSql(string value);

-        protected virtual bool SetFixedLength(bool fixedLength);

-    }
-    public static class RelationalPropertyExtensions {
 {
-        public static bool IsColumnNullable(this IProperty property);

-    }
-    public class SequenceBuilder {
 {
-        public SequenceBuilder(IMutableSequence sequence);

-        public virtual IMutableSequence Metadata { get; }

-        public override bool Equals(object obj);

-        public override int GetHashCode();

-        public virtual SequenceBuilder HasMax(long maximum);

-        public virtual SequenceBuilder HasMin(long minimum);

-        public virtual SequenceBuilder IncrementsBy(int increment);

-        public virtual SequenceBuilder IsCyclic(bool cyclic = true);

-        public virtual SequenceBuilder StartsAt(long startValue);

-        public override string ToString();

-    }
+    public abstract class ServiceParameterBinding : ParameterBinding {
+        protected ServiceParameterBinding(Type parameterType, Type serviceType, IPropertyBase serviceProperty = null);
+        public virtual Func<MaterializationContext, IEntityType, object, object> ServiceDelegate { get; }
+        public virtual Type ServiceType { get; }
+        public override Expression BindToParameter(ParameterBindingInfo bindingInfo);
+        public abstract Expression BindToParameter(Expression materializationExpression, Expression entityTypeExpression);
+    }
+    public class ServiceParameterBindingFactory : IParameterBindingFactory {
+        public ServiceParameterBindingFactory(Type serviceType);
+        public virtual ParameterBinding Bind(IConventionEntityType entityType, Type parameterType, string parameterName);
+        public virtual ParameterBinding Bind(IMutableEntityType entityType, Type parameterType, string parameterName);
+        public virtual bool CanBind(Type parameterType, string parameterName);
+    }
-    public class SqlitePropertyAnnotations : RelationalPropertyAnnotations, IRelationalPropertyAnnotations, ISqlitePropertyAnnotations {
 {
-        public SqlitePropertyAnnotations(IProperty property);

-        protected SqlitePropertyAnnotations(RelationalAnnotations annotations);

-        public virtual string Dimension { get; set; }

-        public virtual int? Srid { get; set; }

-        protected virtual bool SetDimension(string value);

-        protected virtual bool SetSrid(int? value);

-    }
-    public class SqlServerEntityTypeAnnotations : RelationalEntityTypeAnnotations, IRelationalEntityTypeAnnotations, ISqlServerEntityTypeAnnotations {
 {
-        public SqlServerEntityTypeAnnotations(IEntityType entityType);

-        public SqlServerEntityTypeAnnotations(RelationalAnnotations annotations);

-        public virtual bool IsMemoryOptimized { get; set; }

-        protected virtual bool SetIsMemoryOptimized(bool value);

-    }
-    public class SqlServerIndexAnnotations : RelationalIndexAnnotations, IRelationalIndexAnnotations, ISqlServerIndexAnnotations {
 {
-        public SqlServerIndexAnnotations(IIndex index);

-        protected SqlServerIndexAnnotations(RelationalAnnotations annotations);

-        public virtual IReadOnlyList<string> IncludeProperties { get; set; }

-        public virtual bool? IsClustered { get; set; }

-        protected virtual bool SetInclude(IReadOnlyList<string> properties);

-        protected virtual bool SetIsClustered(bool? value);

-    }
-    public class SqlServerKeyAnnotations : RelationalKeyAnnotations, IRelationalKeyAnnotations, ISqlServerKeyAnnotations {
 {
-        public SqlServerKeyAnnotations(IKey key);

-        protected SqlServerKeyAnnotations(RelationalAnnotations annotations);

-        public virtual bool? IsClustered { get; set; }

-        protected virtual bool SetIsClustered(bool? value);

-    }
-    public class SqlServerModelAnnotations : RelationalModelAnnotations, IRelationalModelAnnotations, ISqlServerModelAnnotations {
 {
-        public const string DefaultHiLoSequenceName = "EntityFrameworkHiLoSequence";

-        public SqlServerModelAnnotations(IModel model);

-        protected SqlServerModelAnnotations(RelationalAnnotations annotations);

-        public virtual string HiLoSequenceName { get; set; }

-        public virtual string HiLoSequenceSchema { get; set; }

-        public virtual SqlServerValueGenerationStrategy? ValueGenerationStrategy { get; set; }

-        protected virtual bool SetHiLoSequenceName(string value);

-        protected virtual bool SetHiLoSequenceSchema(string value);

-        protected virtual bool SetValueGenerationStrategy(SqlServerValueGenerationStrategy? value);

-    }
-    public class SqlServerPropertyAnnotations : RelationalPropertyAnnotations, IRelationalPropertyAnnotations, ISqlServerPropertyAnnotations {
 {
-        public SqlServerPropertyAnnotations(IProperty property);

-        protected SqlServerPropertyAnnotations(RelationalAnnotations annotations);

-        public virtual string HiLoSequenceName { get; set; }

-        public virtual string HiLoSequenceSchema { get; set; }

-        public virtual SqlServerValueGenerationStrategy? ValueGenerationStrategy { get; set; }

-        protected override bool CanSetComputedColumnSql(string value);

-        protected override bool CanSetDefaultValue(object value);

-        protected override bool CanSetDefaultValueSql(string value);

-        protected virtual bool CanSetValueGenerationStrategy(SqlServerValueGenerationStrategy? value);

-        protected override void ClearAllServerGeneratedValues();

-        public virtual ISequence FindHiLoSequence();

-        protected override string GetComputedColumnSql(bool fallback);

-        protected override object GetDefaultValue(bool fallback);

-        protected override string GetDefaultValueSql(bool fallback);

-        public virtual SqlServerValueGenerationStrategy? GetSqlServerValueGenerationStrategy(bool fallbackToModel);

-        protected virtual bool SetHiLoSequenceName(string value);

-        protected virtual bool SetHiLoSequenceSchema(string value);

-        protected virtual bool SetValueGenerationStrategy(SqlServerValueGenerationStrategy? value);

-    }
     public enum SqlServerValueGenerationStrategy {
-        IdentityColumn = 1,
+        IdentityColumn = 2,
+        None = 0,
-        SequenceHiLo = 0,
+        SequenceHiLo = 1,
     }
 }
```

