# Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal

``` diff
-namespace Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal {
 {
-    public interface ILibuvTrace : ILogger {
 {
-        void ConnectionError(string connectionId, Exception ex);

-        void ConnectionPause(string connectionId);

-        void ConnectionRead(string connectionId, int count);

-        void ConnectionReadFin(string connectionId);

-        void ConnectionReset(string connectionId);

-        void ConnectionResume(string connectionId);

-        void ConnectionWrite(string connectionId, int count);

-        void ConnectionWriteCallback(string connectionId, int status);

-        void ConnectionWriteFin(string connectionId, string reason);

-    }
-    public class LibuvAwaitable<TRequest> : ICriticalNotifyCompletion, INotifyCompletion where TRequest : UvRequest {
 {
-        public static readonly Action<TRequest, int, UvException, object> Callback;

-        public LibuvAwaitable();

-        public bool IsCompleted { get; }

-        public LibuvAwaitable<TRequest> GetAwaiter();

-        public UvWriteResult GetResult();

-        public void OnCompleted(Action continuation);

-        public void UnsafeOnCompleted(Action continuation);

-    }
-    public class LibuvConnection : TransportConnection, IDisposable {
 {
-        public LibuvConnection(UvStreamHandle socket, ILibuvTrace log, LibuvThread thread, IPEndPoint remoteEndPoint, IPEndPoint localEndPoint);

-        public override PipeScheduler InputWriterScheduler { get; }

-        public override MemoryPool<byte> MemoryPool { get; }

-        public LibuvOutputConsumer OutputConsumer { get; set; }

-        public override PipeScheduler OutputReaderScheduler { get; }

-        public override void Abort(ConnectionAbortedException abortReason);

-        public void Dispose();

-        public Task Start();

-    }
-    public class LibuvOutputConsumer {
 {
-        public LibuvOutputConsumer(PipeReader pipe, LibuvThread thread, UvStreamHandle socket, string connectionId, ILibuvTrace log);

-        public Task WriteOutputAsync();

-    }
-    public class LibuvThread : PipeScheduler {
 {
-        public LibuvThread(LibuvTransport transport);

-        public LibuvThread(LibuvTransport transport, int maxLoops);

-        public Exception FatalError { get; }

-        public UvLoopHandle Loop { get; }

-        public MemoryPool<byte> MemoryPool { get; }

-        public Action<Action<IntPtr>, IntPtr> QueueCloseHandle { get; }

-        public WriteReqPool WriteReqPool { get; }

-        public void Post<T>(Action<T> callback, T state);

-        public Task PostAsync<T>(Action<T> callback, T state);

-        public override void Schedule(Action<object> action, object state);

-        public Task StartAsync();

-        public Task StopAsync(TimeSpan timeout);

-        public void Walk(Action<IntPtr> callback);

-    }
-    public class LibuvTrace : ILibuvTrace, ILogger {
 {
-        public LibuvTrace(ILogger logger);

-        public IDisposable BeginScope<TState>(TState state);

-        public void ConnectionError(string connectionId, Exception ex);

-        public void ConnectionPause(string connectionId);

-        public void ConnectionRead(string connectionId, int count);

-        public void ConnectionReadFin(string connectionId);

-        public void ConnectionReset(string connectionId);

-        public void ConnectionResume(string connectionId);

-        public void ConnectionWrite(string connectionId, int count);

-        public void ConnectionWriteCallback(string connectionId, int status);

-        public void ConnectionWriteFin(string connectionId, string reason);

-        public bool IsEnabled(LogLevel logLevel);

-        public void Log<TState>(LogLevel logLevel, EventId eventId, TState state, Exception exception, Func<TState, Exception, string> formatter);

-    }
-    public class LibuvTransport : ITransport {
 {
-        public LibuvTransport(LibuvTransportContext context, IEndPointInformation endPointInformation);

-        public LibuvTransport(LibuvFunctions uv, LibuvTransportContext context, IEndPointInformation endPointInformation);

-        public IApplicationLifetime AppLifetime { get; }

-        public LibuvFunctions Libuv { get; }

-        public ILibuvTrace Log { get; }

-        public List<LibuvThread> Threads { get; }

-        public LibuvTransportContext TransportContext { get; }

-        public LibuvTransportOptions TransportOptions { get; }

-        public Task BindAsync();

-        public Task StopAsync();

-        public Task UnbindAsync();

-    }
-    public class LibuvTransportContext {
 {
-        public LibuvTransportContext();

-        public IApplicationLifetime AppLifetime { get; set; }

-        public IConnectionDispatcher ConnectionDispatcher { get; set; }

-        public ILibuvTrace Log { get; set; }

-        public LibuvTransportOptions Options { get; set; }

-    }
-    public class LibuvTransportFactory : ITransportFactory {
 {
-        public LibuvTransportFactory(IOptions<LibuvTransportOptions> options, IApplicationLifetime applicationLifetime, ILoggerFactory loggerFactory);

-        public ITransport Create(IEndPointInformation endPointInformation, IConnectionDispatcher dispatcher);

-    }
-    public class Listener : ListenerContext, IAsyncDisposable {
 {
-        public Listener(LibuvTransportContext transportContext);

-        protected UvStreamHandle ListenSocket { get; private set; }

-        public ILibuvTrace Log { get; }

-        protected virtual void DispatchConnection(UvStreamHandle socket);

-        public virtual Task DisposeAsync();

-        public Task StartAsync(IEndPointInformation endPointInformation, LibuvThread thread);

-    }
-    public class ListenerContext {
 {
-        public ListenerContext(LibuvTransportContext transportContext);

-        public IEndPointInformation EndPointInformation { get; set; }

-        public LibuvThread Thread { get; set; }

-        public LibuvTransportContext TransportContext { get; set; }

-        protected UvStreamHandle CreateAcceptSocket();

-        protected Task HandleConnectionAsync(UvStreamHandle socket);

-    }
-    public class ListenerPrimary : Listener {
 {
-        public ListenerPrimary(LibuvTransportContext transportContext);

-        public int UvPipeCount { get; }

-        protected override void DispatchConnection(UvStreamHandle socket);

-        public override Task DisposeAsync();

-        public Task StartAsync(string pipeName, byte[] pipeMessage, IEndPointInformation endPointInformation, LibuvThread thread);

-    }
-    public class ListenerSecondary : ListenerContext, IAsyncDisposable {
 {
-        public ListenerSecondary(LibuvTransportContext transportContext);

-        public ILibuvTrace Log { get; }

-        public Task DisposeAsync();

-        public Task StartAsync(string pipeName, byte[] pipeMessage, IEndPointInformation endPointInformation, LibuvThread thread);

-    }
-    public struct UvWriteResult {
 {
-        public UvWriteResult(int status, UvException error);

-        public UvException Error { get; }

-        public int Status { get; }

-    }
-    public class WriteReqPool {
 {
-        public WriteReqPool(LibuvThread thread, ILibuvTrace log);

-        public UvWriteReq Allocate();

-        public void Dispose();

-        public void Return(UvWriteReq req);

-    }
-}
```

