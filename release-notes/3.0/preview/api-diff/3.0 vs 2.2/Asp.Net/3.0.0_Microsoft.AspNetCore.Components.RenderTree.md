# Microsoft.AspNetCore.Components.RenderTree

``` diff
+namespace Microsoft.AspNetCore.Components.RenderTree {
+    public readonly struct ArrayBuilderSegment<T> : IEnumerable, IEnumerable<T> {
+        public T[] Array { get; }
+        public int Count { get; }
+        public int Offset { get; }
+        public T this[int index] { get; }
+        IEnumerator<T> System.Collections.Generic.IEnumerable<T>.GetEnumerator();
+        IEnumerator System.Collections.IEnumerable.GetEnumerator();
+    }
+    public readonly struct ArrayRange<T> {
+        public readonly int Count;
+        public readonly T[] Array;
+        public ArrayRange(T[] array, int count);
+        public ArrayRange<T> Clone();
+    }
+    public class EventFieldInfo {
+        public EventFieldInfo();
+        public int ComponentId { get; set; }
+        public object FieldValue { get; set; }
+    }
+    public readonly struct RenderBatch {
+        public ArrayRange<int> DisposedComponentIDs { get; }
+        public ArrayRange<ulong> DisposedEventHandlerIDs { get; }
+        public ArrayRange<RenderTreeFrame> ReferenceFrames { get; }
+        public ArrayRange<RenderTreeDiff> UpdatedComponents { get; }
+    }
+    public abstract class Renderer : IDisposable {
+        public Renderer(IServiceProvider serviceProvider, ILoggerFactory loggerFactory);
+        public abstract Dispatcher Dispatcher { get; }
+        public event UnhandledExceptionEventHandler UnhandledSynchronizationException;
+        protected internal int AssignRootComponentId(IComponent component);
+        public virtual Task DispatchEventAsync(ulong eventHandlerId, EventFieldInfo fieldInfo, EventArgs eventArgs);
+        public void Dispose();
+        protected virtual void Dispose(bool disposing);
+        protected ArrayRange<RenderTreeFrame> GetCurrentRenderTreeFrames(int componentId);
+        protected abstract void HandleException(Exception exception);
+        protected IComponent InstantiateComponent(Type componentType);
+        protected virtual void ProcessPendingRender();
+        protected Task RenderRootComponentAsync(int componentId);
+        protected Task RenderRootComponentAsync(int componentId, ParameterView initialParameters);
+        protected abstract Task UpdateDisplayAsync(in RenderBatch renderBatch);
+    }
+    public readonly struct RenderTreeDiff {
+        public readonly ArrayBuilderSegment<RenderTreeEdit> Edits;
+        public readonly int ComponentId;
+    }
+    public readonly struct RenderTreeEdit {
+        [System.Runtime.InteropServices.FieldOffsetAttribute(0)]
+        public readonly RenderTreeEditType Type;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(8)]
+        public readonly int MoveToSiblingIndex;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(8)]
+        public readonly int ReferenceFrameIndex;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(4)]
+        public readonly int SiblingIndex;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(16)]
+        public readonly string RemovedAttributeName;
+    }
+    public enum RenderTreeEditType {
+        PermutationListEnd = 10,
+        PermutationListEntry = 9,
+        PrependFrame = 1,
+        RemoveAttribute = 4,
+        RemoveFrame = 2,
+        SetAttribute = 3,
+        StepIn = 6,
+        StepOut = 7,
+        UpdateMarkup = 8,
+        UpdateText = 5,
+    }
+    public readonly struct RenderTreeFrame {
+        [System.Runtime.InteropServices.FieldOffsetAttribute(4)]
+        public readonly RenderTreeFrameType FrameType;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(24)]
+        public readonly Action<ElementReference> ElementReferenceCaptureAction;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(16)]
+        public readonly Action<object> ComponentReferenceCaptureAction;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(12)]
+        public readonly int ComponentId;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(8)]
+        public readonly int ComponentReferenceCaptureParentFrameIndex;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(8)]
+        public readonly int ComponentSubtreeLength;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(8)]
+        public readonly int ElementSubtreeLength;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(8)]
+        public readonly int RegionSubtreeLength;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(0)]
+        public readonly int Sequence;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(24)]
+        public readonly object AttributeValue;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(32)]
+        public readonly object ComponentKey;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(24)]
+        public readonly object ElementKey;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(32)]
+        public readonly string AttributeEventUpdatesAttributeName;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(16)]
+        public readonly string AttributeName;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(16)]
+        public readonly string ElementName;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(16)]
+        public readonly string ElementReferenceCaptureId;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(16)]
+        public readonly string MarkupContent;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(16)]
+        public readonly string TextContent;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(16)]
+        public readonly Type ComponentType;
+        [System.Runtime.InteropServices.FieldOffsetAttribute(8)]
+        public readonly ulong AttributeEventHandlerId;
+        public IComponent Component { get; }
+        public override string ToString();
+    }
+    public enum RenderTreeFrameType : short {
+        Attribute = (short)3,
+        Component = (short)4,
+        ComponentReferenceCapture = (short)7,
+        Element = (short)1,
+        ElementReferenceCapture = (short)6,
+        Markup = (short)8,
+        None = (short)0,
+        Region = (short)5,
+        Text = (short)2,
+    }
+    public sealed class WebEventDescriptor {
+        public WebEventDescriptor();
+        public int BrowserRendererId { get; set; }
+        public string EventArgsType { get; set; }
+        public EventFieldInfo EventFieldInfo { get; set; }
+        public ulong EventHandlerId { get; set; }
+    }
+}
```

