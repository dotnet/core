# Microsoft.Extensions.DependencyInjection

``` diff
 namespace Microsoft.Extensions.DependencyInjection {
     public static class AuthenticationServiceCollectionExtensions {
-        public static IServiceCollection AddRemoteScheme<TOptions, THandler>(this IServiceCollection services, string authenticationScheme, string displayName, Action<TOptions> configureOptions) where TOptions : RemoteAuthenticationOptions, new() where THandler : RemoteAuthenticationHandler<TOptions>;

-        public static IServiceCollection AddScheme<TOptions, THandler>(this IServiceCollection services, string authenticationScheme, Action<TOptions> configureOptions) where TOptions : AuthenticationSchemeOptions, new() where THandler : AuthenticationHandler<TOptions>;

-        public static IServiceCollection AddScheme<TOptions, THandler>(this IServiceCollection services, string authenticationScheme, string displayName, Action<AuthenticationSchemeBuilder> configureScheme, Action<TOptions> configureOptions) where TOptions : AuthenticationSchemeOptions, new() where THandler : AuthenticationHandler<TOptions>;

-        public static IServiceCollection AddScheme<TOptions, THandler>(this IServiceCollection services, string authenticationScheme, string displayName, Action<TOptions> configureOptions) where TOptions : AuthenticationSchemeOptions, new() where THandler : AuthenticationHandler<TOptions>;

     }
     public static class AuthorizationServiceCollectionExtensions {
-        public static IServiceCollection AddAuthorization(this IServiceCollection services);

-        public static IServiceCollection AddAuthorization(this IServiceCollection services, Action<AuthorizationOptions> configure);

+        public static IServiceCollection AddAuthorizationCore(this IServiceCollection services);
+        public static IServiceCollection AddAuthorizationCore(this IServiceCollection services, Action<AuthorizationOptions> configure);
     }
+    public static class CertificateAuthenticationAppBuilderExtensions {
+        public static AuthenticationBuilder AddCertificate(this AuthenticationBuilder builder);
+        public static AuthenticationBuilder AddCertificate(this AuthenticationBuilder builder, Action<CertificateAuthenticationOptions> configureOptions);
+        public static AuthenticationBuilder AddCertificate(this AuthenticationBuilder builder, string authenticationScheme);
+        public static AuthenticationBuilder AddCertificate(this AuthenticationBuilder builder, string authenticationScheme, Action<CertificateAuthenticationOptions> configureOptions);
+    }
+    public static class CertificateForwardingServiceExtensions {
+        public static IServiceCollection AddCertificateForwarding(this IServiceCollection services, Action<CertificateForwardingOptions> configure);
+    }
+    public static class ComponentServiceCollectionExtensions {
+        public static IServerSideBlazorBuilder AddServerSideBlazor(this IServiceCollection services, Action<CircuitOptions> configure = null);
+    }
     public static class ConnectionsDependencyInjectionExtensions {
+        public static IServiceCollection AddConnections(this IServiceCollection services, Action<ConnectionOptions> options);
     }
     public static class EntityFrameworkCoreHealthChecksBuilderExtensions {
-        public static IHealthChecksBuilder AddDbContextCheck<TContext>(this IHealthChecksBuilder builder, string name = null, HealthStatus? failureStatus = default(HealthStatus?), IEnumerable<string> tags = null, Func<TContext, CancellationToken, Task<bool>> customTestQuery = null) where TContext : DbContext;
+        public static IHealthChecksBuilder AddDbContextCheck<TContext>(this IHealthChecksBuilder builder, string name = null, Nullable<HealthStatus> failureStatus = default(Nullable<HealthStatus>), IEnumerable<string> tags = null, Func<TContext, CancellationToken, Task<bool>> customTestQuery = null) where TContext : DbContext;
     }
+    public static class HeaderPropagationHttpClientBuilderExtensions {
+        public static IHttpClientBuilder AddHeaderPropagation(this IHttpClientBuilder builder);
+        public static IHttpClientBuilder AddHeaderPropagation(this IHttpClientBuilder builder, Action<HeaderPropagationMessageHandlerOptions> configure);
+    }
+    public static class HeaderPropagationServiceCollectionExtensions {
+        public static IServiceCollection AddHeaderPropagation(this IServiceCollection services);
+        public static IServiceCollection AddHeaderPropagation(this IServiceCollection services, Action<HeaderPropagationOptions> configureOptions);
+    }
     public static class HealthChecksBuilderAddCheckExtensions {
-        public static IHealthChecksBuilder AddCheck(this IHealthChecksBuilder builder, string name, IHealthCheck instance, HealthStatus? failureStatus = default(HealthStatus?), IEnumerable<string> tags = null);
+        public static IHealthChecksBuilder AddCheck(this IHealthChecksBuilder builder, string name, IHealthCheck instance, HealthStatus? failureStatus, IEnumerable<string> tags);
+        public static IHealthChecksBuilder AddCheck(this IHealthChecksBuilder builder, string name, IHealthCheck instance, HealthStatus? failureStatus = default(HealthStatus?), IEnumerable<string> tags = null, TimeSpan? timeout = default(TimeSpan?));
-        public static IHealthChecksBuilder AddCheck<T>(this IHealthChecksBuilder builder, string name, HealthStatus? failureStatus = default(HealthStatus?), IEnumerable<string> tags = null) where T : class, IHealthCheck;
+        public static IHealthChecksBuilder AddCheck<T>(this IHealthChecksBuilder builder, string name, HealthStatus? failureStatus, IEnumerable<string> tags) where T : class, IHealthCheck;
+        public static IHealthChecksBuilder AddCheck<T>(this IHealthChecksBuilder builder, string name, HealthStatus? failureStatus = default(HealthStatus?), IEnumerable<string> tags = null, TimeSpan? timeout = default(TimeSpan?)) where T : class, IHealthCheck;
+        public static IHealthChecksBuilder AddTypeActivatedCheck<T>(this IHealthChecksBuilder builder, string name, HealthStatus? failureStatus, IEnumerable<string> tags, TimeSpan timeout, params object[] args) where T : class, IHealthCheck;
     }
     public static class HealthChecksBuilderDelegateExtensions {
-        public static IHealthChecksBuilder AddAsyncCheck(this IHealthChecksBuilder builder, string name, Func<CancellationToken, Task<HealthCheckResult>> check, IEnumerable<string> tags = null);
+        public static IHealthChecksBuilder AddAsyncCheck(this IHealthChecksBuilder builder, string name, Func<CancellationToken, Task<HealthCheckResult>> check, IEnumerable<string> tags);
+        public static IHealthChecksBuilder AddAsyncCheck(this IHealthChecksBuilder builder, string name, Func<CancellationToken, Task<HealthCheckResult>> check, IEnumerable<string> tags = null, TimeSpan? timeout = default(TimeSpan?));
-        public static IHealthChecksBuilder AddAsyncCheck(this IHealthChecksBuilder builder, string name, Func<Task<HealthCheckResult>> check, IEnumerable<string> tags = null);
+        public static IHealthChecksBuilder AddAsyncCheck(this IHealthChecksBuilder builder, string name, Func<Task<HealthCheckResult>> check, IEnumerable<string> tags);
+        public static IHealthChecksBuilder AddAsyncCheck(this IHealthChecksBuilder builder, string name, Func<Task<HealthCheckResult>> check, IEnumerable<string> tags = null, TimeSpan? timeout = default(TimeSpan?));
-        public static IHealthChecksBuilder AddCheck(this IHealthChecksBuilder builder, string name, Func<HealthCheckResult> check, IEnumerable<string> tags = null);
+        public static IHealthChecksBuilder AddCheck(this IHealthChecksBuilder builder, string name, Func<HealthCheckResult> check, IEnumerable<string> tags);
+        public static IHealthChecksBuilder AddCheck(this IHealthChecksBuilder builder, string name, Func<HealthCheckResult> check, IEnumerable<string> tags = null, TimeSpan? timeout = default(TimeSpan?));
-        public static IHealthChecksBuilder AddCheck(this IHealthChecksBuilder builder, string name, Func<CancellationToken, HealthCheckResult> check, IEnumerable<string> tags = null);
+        public static IHealthChecksBuilder AddCheck(this IHealthChecksBuilder builder, string name, Func<CancellationToken, HealthCheckResult> check, IEnumerable<string> tags);
+        public static IHealthChecksBuilder AddCheck(this IHealthChecksBuilder builder, string name, Func<CancellationToken, HealthCheckResult> check, IEnumerable<string> tags = null, TimeSpan? timeout = default(TimeSpan?));
     }
+    public static class IdentityServerBuilderConfigurationExtensions {
+        public static IIdentityServerBuilder AddApiAuthorization<TUser, TContext>(this IIdentityServerBuilder builder) where TUser : class where TContext : DbContext, IPersistedGrantDbContext;
+        public static IIdentityServerBuilder AddApiAuthorization<TUser, TContext>(this IIdentityServerBuilder builder, Action<ApiAuthorizationOptions> configure) where TUser : class where TContext : DbContext, IPersistedGrantDbContext;
+        public static IIdentityServerBuilder AddApiResources(this IIdentityServerBuilder builder);
+        public static IIdentityServerBuilder AddApiResources(this IIdentityServerBuilder builder, IConfiguration configuration);
+        public static IIdentityServerBuilder AddClients(this IIdentityServerBuilder builder);
+        public static IIdentityServerBuilder AddClients(this IIdentityServerBuilder builder, IConfiguration configuration);
+        public static IIdentityServerBuilder AddIdentityResources(this IIdentityServerBuilder builder);
+        public static IIdentityServerBuilder AddIdentityResources(this IIdentityServerBuilder builder, IConfiguration configuration);
+        public static IIdentityServerBuilder AddSigningCredentials(this IIdentityServerBuilder builder);
+        public static IIdentityServerBuilder AddSigningCredentials(this IIdentityServerBuilder builder, IConfiguration configuration);
+    }
+    public interface IServerSideBlazorBuilder {
+        IServiceCollection Services { get; }
+    }
     public static class MvcCoreMvcBuilderExtensions {
+        public static IMvcBuilder AddJsonOptions(this IMvcBuilder builder, Action<JsonOptions> configure);
     }
     public static class MvcCoreMvcCoreBuilderExtensions {
+        public static IMvcCoreBuilder AddJsonOptions(this IMvcCoreBuilder builder, Action<JsonOptions> configure);
     }
-    public static class MvcJsonMvcBuilderExtensions {
 {
-        public static IMvcBuilder AddJsonOptions(this IMvcBuilder builder, Action<MvcJsonOptions> setupAction);

-    }
-    public static class MvcJsonMvcCoreBuilderExtensions {
 {
-        public static IMvcCoreBuilder AddJsonFormatters(this IMvcCoreBuilder builder);

-        public static IMvcCoreBuilder AddJsonFormatters(this IMvcCoreBuilder builder, Action<JsonSerializerSettings> setupAction);

-        public static IMvcCoreBuilder AddJsonOptions(this IMvcCoreBuilder builder, Action<MvcJsonOptions> setupAction);

-    }
-    public static class MvcJsonOptionsExtensions {
 {
-        public static MvcJsonOptions UseCamelCasing(this MvcJsonOptions options, bool processDictionaryKeys);

-        public static MvcJsonOptions UseMemberCasing(this MvcJsonOptions options);

-    }
+    public static class MvcNewtonsoftJsonOptionsExtensions {
+        public static MvcNewtonsoftJsonOptions UseCamelCasing(this MvcNewtonsoftJsonOptions options, bool processDictionaryKeys);
+        public static MvcNewtonsoftJsonOptions UseMemberCasing(this MvcNewtonsoftJsonOptions options);
+    }
     public static class MvcServiceCollectionExtensions {
+        public static IMvcBuilder AddControllers(this IServiceCollection services);
+        public static IMvcBuilder AddControllers(this IServiceCollection services, Action<MvcOptions> configure);
+        public static IMvcBuilder AddControllersWithViews(this IServiceCollection services);
+        public static IMvcBuilder AddControllersWithViews(this IServiceCollection services, Action<MvcOptions> configure);
+        public static IMvcBuilder AddRazorPages(this IServiceCollection services);
+        public static IMvcBuilder AddRazorPages(this IServiceCollection services, Action<RazorPagesOptions> configure);
     }
+    public static class NegotiateExtensions {
+        public static AuthenticationBuilder AddNegotiate(this AuthenticationBuilder builder);
+        public static AuthenticationBuilder AddNegotiate(this AuthenticationBuilder builder, Action<NegotiateOptions> configureOptions);
+        public static AuthenticationBuilder AddNegotiate(this AuthenticationBuilder builder, string authenticationScheme, Action<NegotiateOptions> configureOptions);
+        public static AuthenticationBuilder AddNegotiate(this AuthenticationBuilder builder, string authenticationScheme, string displayName, Action<NegotiateOptions> configureOptions);
+    }
+    public static class NewtonsoftJsonMvcBuilderExtensions {
+        public static IMvcBuilder AddNewtonsoftJson(this IMvcBuilder builder);
+        public static IMvcBuilder AddNewtonsoftJson(this IMvcBuilder builder, Action<MvcNewtonsoftJsonOptions> setupAction);
+    }
+    public static class NewtonsoftJsonMvcCoreBuilderExtensions {
+        public static IMvcCoreBuilder AddNewtonsoftJson(this IMvcCoreBuilder builder);
+        public static IMvcCoreBuilder AddNewtonsoftJson(this IMvcCoreBuilder builder, Action<MvcNewtonsoftJsonOptions> setupAction);
+    }
+    public static class NewtonsoftJsonProtocolDependencyInjectionExtensions {
+        public static TBuilder AddNewtonsoftJsonProtocol<TBuilder>(this TBuilder builder) where TBuilder : ISignalRBuilder;
+        public static TBuilder AddNewtonsoftJsonProtocol<TBuilder>(this TBuilder builder, Action<NewtonsoftJsonHubProtocolOptions> configure) where TBuilder : ISignalRBuilder;
+    }
     public static class PolicyServiceCollectionExtensions {
+        public static IServiceCollection AddAuthorization(this IServiceCollection services);
+        public static IServiceCollection AddAuthorization(this IServiceCollection services, Action<AuthorizationOptions> configure);
     }
     public static class PollyHttpClientBuilderExtensions {
+        public static IHttpClientBuilder AddPolicyHandler(this IHttpClientBuilder builder, Func<IServiceProvider, HttpRequestMessage, string, IAsyncPolicy<HttpResponseMessage>> policyFactory, Func<HttpRequestMessage, string> keySelector);
     }
+    public static class QueuePolicyServiceCollectionExtensions {
+        public static IServiceCollection AddQueuePolicy(this IServiceCollection services, Action<QueuePolicyOptions> configure);
+        public static IServiceCollection AddStackPolicy(this IServiceCollection services, Action<QueuePolicyOptions> configure);
+    }
+    public static class RazorRuntimeCompilationMvcBuilderExtensions {
+        public static IMvcBuilder AddRazorRuntimeCompilation(this IMvcBuilder builder);
+        public static IMvcBuilder AddRazorRuntimeCompilation(this IMvcBuilder builder, Action<MvcRazorRuntimeCompilationOptions> setupAction);
+    }
+    public static class RazorRuntimeCompilationMvcCoreBuilderExtensions {
+        public static IMvcCoreBuilder AddRazorRuntimeCompilation(this IMvcCoreBuilder builder);
+        public static IMvcCoreBuilder AddRazorRuntimeCompilation(this IMvcCoreBuilder builder, Action<MvcRazorRuntimeCompilationOptions> setupAction);
+    }
-    public static class RedisDependencyInjectionExtensions {
 {
-        public static ISignalRServerBuilder AddRedis(this ISignalRServerBuilder signalrBuilder);

-        public static ISignalRServerBuilder AddRedis(this ISignalRServerBuilder signalrBuilder, Action<RedisOptions> configure);

-        public static ISignalRServerBuilder AddRedis(this ISignalRServerBuilder signalrBuilder, string redisConnectionString);

-        public static ISignalRServerBuilder AddRedis(this ISignalRServerBuilder signalrBuilder, string redisConnectionString, Action<RedisOptions> configure);

-    }
+    public static class ServerSideBlazorBuilderExtensions {
+        public static IServerSideBlazorBuilder AddCircuitOptions(this IServerSideBlazorBuilder builder, Action<CircuitOptions> configure);
+        public static IServerSideBlazorBuilder AddHubOptions(this IServerSideBlazorBuilder builder, Action<HubOptions> configure);
+    }
     public static class ServiceCollectionHostedServiceExtensions {
+        public static IServiceCollection AddHostedService<THostedService>(this IServiceCollection services, Func<IServiceProvider, THostedService> implementationFactory) where THostedService : class, IHostedService;
     }
     public class ServiceDescriptor {
+        public override string ToString();
     }
-    public sealed class ServiceProvider : IDisposable, IServiceProvider, IServiceProviderEngineCallback {
+    public sealed class ServiceProvider : IAsyncDisposable, IDisposable, IServiceProvider, IServiceProviderEngineCallback {
+        public ValueTask DisposeAsync();
     }
     public class ServiceProviderOptions {
+        public bool ValidateOnBuild { get; set; }
     }
-    public static class WebApiCompatShimMvcBuilderExtensions {
 {
-        public static IMvcBuilder AddWebApiConventions(this IMvcBuilder builder);

-    }
 }
```

