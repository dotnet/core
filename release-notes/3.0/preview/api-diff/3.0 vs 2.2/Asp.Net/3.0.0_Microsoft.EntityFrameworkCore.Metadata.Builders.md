# Microsoft.EntityFrameworkCore.Metadata.Builders

``` diff
 namespace Microsoft.EntityFrameworkCore.Metadata.Builders {
     public class CollectionNavigationBuilder : IInfrastructure<InternalRelationshipBuilder> {
+        public CollectionNavigationBuilder(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, MemberInfo navigationMemberInfo, IMutableForeignKey foreignKey);
+        public CollectionNavigationBuilder(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, string navigationName, IMutableForeignKey foreignKey);
-        public CollectionNavigationBuilder(EntityType declaringEntityType, EntityType relatedEntityType, PropertyInfo navigationProperty, InternalRelationshipBuilder builder);

-        public CollectionNavigationBuilder(EntityType declaringEntityType, EntityType relatedEntityType, string navigationName, InternalRelationshipBuilder builder);

+        protected virtual MemberInfo CollectionMember { get; }
-        protected virtual PropertyInfo CollectionProperty { get; }

-        protected virtual EntityType DeclaringEntityType { get; }
+        protected virtual IMutableEntityType DeclaringEntityType { get; }
-        protected virtual EntityType RelatedEntityType { get; }
+        protected virtual IMutableEntityType RelatedEntityType { get; }
+        protected virtual InternalRelationshipBuilder WithOneBuilder(MemberInfo navigationMemberInfo);
-        protected virtual InternalRelationshipBuilder WithOneBuilder(PropertyInfo navigationProperty);

     }
     public class CollectionNavigationBuilder<TEntity, TRelatedEntity> : CollectionNavigationBuilder where TEntity : class where TRelatedEntity : class {
+        public CollectionNavigationBuilder(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, MemberInfo navigationMemberInfo, IMutableForeignKey foreignKey);
+        public CollectionNavigationBuilder(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, string navigationName, IMutableForeignKey foreignKey);
-        public CollectionNavigationBuilder(EntityType declaringEntityType, EntityType relatedEntityType, PropertyInfo navigationProperty, InternalRelationshipBuilder builder);

-        public CollectionNavigationBuilder(EntityType declaringEntityType, EntityType relatedEntityType, string navigationName, InternalRelationshipBuilder builder);

     }
-    public class CollectionOwnershipBuilder : ReferenceCollectionBuilderBase, IInfrastructure<InternalEntityTypeBuilder> {
 {
-        public CollectionOwnershipBuilder(EntityType declaringEntityType, EntityType relatedEntityType, InternalRelationshipBuilder builder);

-        protected CollectionOwnershipBuilder(InternalRelationshipBuilder builder, CollectionOwnershipBuilder oldBuilder, bool foreignKeySet = false, bool principalKeySet = false, bool requiredSet = false);

-        InternalEntityTypeBuilder Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.Internal.InternalEntityTypeBuilder>.Instance { get; }

-        public virtual IMutableEntityType OwnedEntityType { get; }

-        protected virtual EntityType FindRelatedEntityType(string relatedTypeName, string navigationName);

-        protected virtual EntityType FindRelatedEntityType(Type relatedType, string navigationName);

-        public virtual CollectionOwnershipBuilder HasChangeTrackingStrategy(ChangeTrackingStrategy changeTrackingStrategy);

-        public virtual DataBuilder HasData(params object[] data);

-        public virtual CollectionOwnershipBuilder HasEntityTypeAnnotation(string annotation, object value);

-        public virtual CollectionOwnershipBuilder HasForeignKey(params string[] foreignKeyPropertyNames);

-        public virtual CollectionOwnershipBuilder HasForeignKeyAnnotation(string annotation, object value);

-        public virtual IndexBuilder HasIndex(params string[] propertyNames);

-        public virtual KeyBuilder HasKey(params string[] propertyNames);

-        public virtual ReferenceNavigationBuilder HasOne(string relatedTypeName, string navigationName = null);

-        public virtual ReferenceNavigationBuilder HasOne(Type relatedType, string navigationName = null);

-        public virtual CollectionOwnershipBuilder HasPrincipalKey(params string[] keyPropertyNames);

-        public virtual CollectionOwnershipBuilder Ignore(string propertyName);

-        public virtual CollectionOwnershipBuilder OnDelete(DeleteBehavior deleteBehavior);

-        public virtual CollectionOwnershipBuilder OwnsMany(string ownedTypeName, string navigationName);

-        public virtual CollectionOwnershipBuilder OwnsMany(string ownedTypeName, string navigationName, Action<CollectionOwnershipBuilder> buildAction);

-        public virtual CollectionOwnershipBuilder OwnsMany(Type ownedType, string navigationName);

-        public virtual CollectionOwnershipBuilder OwnsMany(Type ownedType, string navigationName, Action<CollectionOwnershipBuilder> buildAction);

-        public virtual ReferenceOwnershipBuilder OwnsOne(string ownedTypeName, string navigationName);

-        public virtual CollectionOwnershipBuilder OwnsOne(string ownedTypeName, string navigationName, Action<ReferenceOwnershipBuilder> buildAction);

-        public virtual ReferenceOwnershipBuilder OwnsOne(Type ownedType, string navigationName);

-        public virtual CollectionOwnershipBuilder OwnsOne(Type ownedType, string navigationName, Action<ReferenceOwnershipBuilder> buildAction);

-        public virtual PropertyBuilder Property(string propertyName);

-        public virtual PropertyBuilder Property(Type propertyType, string propertyName);

-        public virtual PropertyBuilder<TProperty> Property<TProperty>(string propertyName);

-        public virtual CollectionOwnershipBuilder UsePropertyAccessMode(PropertyAccessMode propertyAccessMode);

-    }
-    public class CollectionOwnershipBuilder<TEntity, TDependentEntity> : CollectionOwnershipBuilder where TEntity : class where TDependentEntity : class {
 {
-        public CollectionOwnershipBuilder(EntityType declaringEntityType, EntityType relatedEntityType, InternalRelationshipBuilder builder);

-        protected CollectionOwnershipBuilder(InternalRelationshipBuilder builder, CollectionOwnershipBuilder<TEntity, TDependentEntity> oldBuilder, bool foreignKeySet = false, bool principalKeySet = false, bool requiredSet = false);

-        public virtual new CollectionOwnershipBuilder<TEntity, TDependentEntity> HasChangeTrackingStrategy(ChangeTrackingStrategy changeTrackingStrategy);

-        public virtual new DataBuilder<TDependentEntity> HasData(params object[] data);

-        public virtual DataBuilder<TDependentEntity> HasData(params TDependentEntity[] data);

-        public virtual new CollectionOwnershipBuilder<TEntity, TDependentEntity> HasEntityTypeAnnotation(string annotation, object value);

-        public virtual CollectionOwnershipBuilder<TEntity, TDependentEntity> HasForeignKey(Expression<Func<TDependentEntity, object>> foreignKeyExpression);

-        public virtual new CollectionOwnershipBuilder<TEntity, TDependentEntity> HasForeignKey(params string[] foreignKeyPropertyNames);

-        public virtual new CollectionOwnershipBuilder<TEntity, TDependentEntity> HasForeignKeyAnnotation(string annotation, object value);

-        public virtual IndexBuilder HasIndex(Expression<Func<TDependentEntity, object>> indexExpression);

-        public virtual KeyBuilder HasKey(Expression<Func<TDependentEntity, object>> keyExpression);

-        public virtual ReferenceNavigationBuilder<TDependentEntity, TNewRelatedEntity> HasOne<TNewRelatedEntity>(Expression<Func<TDependentEntity, TNewRelatedEntity>> navigationExpression = null) where TNewRelatedEntity : class;

-        public virtual ReferenceNavigationBuilder<TDependentEntity, TNewRelatedEntity> HasOne<TNewRelatedEntity>(string navigationName) where TNewRelatedEntity : class;

-        public virtual CollectionOwnershipBuilder<TEntity, TDependentEntity> HasPrincipalKey(Expression<Func<TEntity, object>> keyExpression);

-        public virtual new CollectionOwnershipBuilder<TEntity, TDependentEntity> HasPrincipalKey(params string[] keyPropertyNames);

-        public virtual CollectionOwnershipBuilder<TEntity, TDependentEntity> Ignore(Expression<Func<TDependentEntity, object>> propertyExpression);

-        public virtual new CollectionOwnershipBuilder<TEntity, TDependentEntity> Ignore(string propertyName);

-        public virtual new CollectionOwnershipBuilder<TEntity, TDependentEntity> OnDelete(DeleteBehavior deleteBehavior);

-        public virtual CollectionOwnershipBuilder<TDependentEntity, TNewDependentEntity> OwnsMany<TNewDependentEntity>(Expression<Func<TDependentEntity, IEnumerable<TNewDependentEntity>>> navigationExpression) where TNewDependentEntity : class;

-        public virtual CollectionOwnershipBuilder<TEntity, TDependentEntity> OwnsMany<TNewDependentEntity>(Expression<Func<TDependentEntity, IEnumerable<TNewDependentEntity>>> navigationExpression, Action<CollectionOwnershipBuilder<TDependentEntity, TNewDependentEntity>> buildAction) where TNewDependentEntity : class;

-        public virtual CollectionOwnershipBuilder<TDependentEntity, TNewDependentEntity> OwnsMany<TNewDependentEntity>(string navigationName) where TNewDependentEntity : class;

-        public virtual CollectionOwnershipBuilder<TEntity, TDependentEntity> OwnsMany<TNewDependentEntity>(string navigationName, Action<CollectionOwnershipBuilder<TDependentEntity, TNewDependentEntity>> buildAction) where TNewDependentEntity : class;

-        public virtual ReferenceOwnershipBuilder<TDependentEntity, TNewRelatedEntity> OwnsOne<TNewRelatedEntity>(string navigationName) where TNewRelatedEntity : class;

-        public virtual ReferenceOwnershipBuilder<TDependentEntity, TRelatedEntity> OwnsOne<TRelatedEntity>(Expression<Func<TDependentEntity, TRelatedEntity>> navigationExpression) where TRelatedEntity : class;

-        public virtual CollectionOwnershipBuilder<TEntity, TDependentEntity> OwnsOne<TRelatedEntity>(Expression<Func<TDependentEntity, TRelatedEntity>> navigationExpression, Action<ReferenceOwnershipBuilder<TDependentEntity, TRelatedEntity>> buildAction) where TRelatedEntity : class;

-        public virtual CollectionOwnershipBuilder<TEntity, TDependentEntity> OwnsOne<TRelatedEntity>(string navigationName, Action<ReferenceOwnershipBuilder<TDependentEntity, TRelatedEntity>> buildAction) where TRelatedEntity : class;

-        public virtual PropertyBuilder<TProperty> Property<TProperty>(Expression<Func<TDependentEntity, TProperty>> propertyExpression);

-        public virtual new CollectionOwnershipBuilder<TEntity, TDependentEntity> UsePropertyAccessMode(PropertyAccessMode propertyAccessMode);

-    }
-    public class DbFunctionBuilder {
+    public class DbFunctionBuilder : IConventionDbFunctionBuilder {
+        public DbFunctionBuilder(IMutableDbFunction function);
-        public DbFunctionBuilder(DbFunction function);

+        IConventionDbFunction Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.Metadata { get; }
+        public virtual DbFunctionParameterBuilder HasParameter(string name);
+        public virtual DbFunctionBuilder HasStoreType(string storeType);
+        public virtual DbFunctionBuilder HasTranslation(Func<IReadOnlyCollection<SqlExpression>, SqlExpression> translation);
-        public virtual DbFunctionBuilder HasTranslation(Func<IReadOnlyCollection<Expression>, Expression> translation);

+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.CanSetName(string name, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.CanSetSchema(string schema, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.CanSetStoreType(string storeType, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.CanSetTranslation(Func<IReadOnlyCollection<SqlExpression>, SqlExpression> translation, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.CanSetTypeMapping(RelationalTypeMapping returnTypeMapping, bool fromDataAnnotation);
+        IConventionDbFunctionBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.HasName(string name, bool fromDataAnnotation);
+        IConventionDbFunctionBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.HasSchema(string schema, bool fromDataAnnotation);
+        IConventionDbFunctionBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.HasStoreType(string storeType, bool fromDataAnnotation);
+        IConventionDbFunctionBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.HasTranslation(Func<IReadOnlyCollection<SqlExpression>, SqlExpression> translation, bool fromDataAnnotation);
+        IConventionDbFunctionBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDbFunctionBuilder.HasTypeMapping(RelationalTypeMapping returnTypeMapping, bool fromDataAnnotation);
     }
+    public class DbFunctionParameterBuilder : IConventionDbFunctionParameterBuilder {
+        public DbFunctionParameterBuilder(IMutableDbFunctionParameter parameter);
+        public virtual IMutableDbFunctionParameter Metadata { get; }
+        IConventionDbFunctionParameter Microsoft.EntityFrameworkCore.Metadata.IConventionDbFunctionParameterBuilder.Metadata { get; }
+        public override bool Equals(object obj);
+        public override int GetHashCode();
+        public virtual DbFunctionParameterBuilder HasStoreType(string storeType);
+        bool Microsoft.EntityFrameworkCore.Metadata.IConventionDbFunctionParameterBuilder.CanSetStoreType(string storeType, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.IConventionDbFunctionParameterBuilder.CanSetTypeMapping(RelationalTypeMapping typeMapping, bool fromDataAnnotation);
+        IConventionDbFunctionParameterBuilder Microsoft.EntityFrameworkCore.Metadata.IConventionDbFunctionParameterBuilder.HasStoreType(string storeType, bool fromDataAnnotation);
+        IConventionDbFunctionParameterBuilder Microsoft.EntityFrameworkCore.Metadata.IConventionDbFunctionParameterBuilder.HasTypeMapping(RelationalTypeMapping typeMapping, bool fromDataAnnotation);
+        public override string ToString();
+    }
-    public class DiscriminatorBuilder {
+    public class DiscriminatorBuilder : IConventionDiscriminatorBuilder {
+        public DiscriminatorBuilder(IMutableEntityType entityType);
-        public DiscriminatorBuilder(RelationalAnnotationsBuilder annotationsBuilder, Func<InternalEntityTypeBuilder, RelationalEntityTypeBuilderAnnotations> getRelationalEntityTypeBuilderAnnotations);

-        protected virtual RelationalAnnotationsBuilder AnnotationsBuilder { get; }

+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDiscriminatorBuilder.CanSetValue(IConventionEntityType entityType, object value, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDiscriminatorBuilder.CanSetValue(object value, bool fromDataAnnotation);
+        IConventionDiscriminatorBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDiscriminatorBuilder.HasValue(IConventionEntityType entityType, object value, bool fromDataAnnotation);
+        IConventionDiscriminatorBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionDiscriminatorBuilder.HasValue(object value, bool fromDataAnnotation);
     }
-    public class EntityTypeBuilder : IInfrastructure<IMutableModel>, IInfrastructure<InternalEntityTypeBuilder> {
+    public class EntityTypeBuilder : IInfrastructure<InternalEntityTypeBuilder> {
+        public EntityTypeBuilder(IMutableEntityType entityType);
-        public EntityTypeBuilder(InternalEntityTypeBuilder builder);

-        IMutableModel Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.IMutableModel>.Instance { get; }

+        public virtual DiscriminatorBuilder HasDiscriminator();
+        public virtual DiscriminatorBuilder HasDiscriminator(string name, Type type);
+        public virtual DiscriminatorBuilder<TDiscriminator> HasDiscriminator<TDiscriminator>(string name);
+        public virtual CollectionNavigationBuilder HasMany(string navigationName);
-        public virtual CollectionNavigationBuilder HasMany(string relatedTypeName, string navigationName = null);
+        public virtual CollectionNavigationBuilder HasMany(string relatedTypeName, string navigationName);
+        public virtual EntityTypeBuilder HasNoDiscriminator();
+        public virtual EntityTypeBuilder HasNoKey();
+        public virtual ReferenceNavigationBuilder HasOne(string navigationName);
-        public virtual ReferenceNavigationBuilder HasOne(string relatedTypeName, string navigationName = null);
+        public virtual ReferenceNavigationBuilder HasOne(string relatedTypeName, string navigationName);
-        public virtual CollectionOwnershipBuilder OwnsMany(string ownedTypeName, string navigationName);

+        public virtual OwnedNavigationBuilder OwnsMany(string ownedTypeName, string navigationName);
-        public virtual EntityTypeBuilder OwnsMany(string ownedTypeName, string navigationName, Action<CollectionOwnershipBuilder> buildAction);

+        public virtual EntityTypeBuilder OwnsMany(string ownedTypeName, string navigationName, Action<OwnedNavigationBuilder> buildAction);
-        public virtual CollectionOwnershipBuilder OwnsMany(Type ownedType, string navigationName);

+        public virtual OwnedNavigationBuilder OwnsMany(Type ownedType, string navigationName);
-        public virtual EntityTypeBuilder OwnsMany(Type ownedType, string navigationName, Action<CollectionOwnershipBuilder> buildAction);

+        public virtual EntityTypeBuilder OwnsMany(Type ownedType, string navigationName, Action<OwnedNavigationBuilder> buildAction);
-        public virtual ReferenceOwnershipBuilder OwnsOne(string ownedTypeName, string navigationName);

+        public virtual OwnedNavigationBuilder OwnsOne(string ownedTypeName, string navigationName);
+        public virtual EntityTypeBuilder OwnsOne(string ownedTypeName, string navigationName, Action<OwnedNavigationBuilder> buildAction);
-        public virtual EntityTypeBuilder OwnsOne(string ownedTypeName, string navigationName, Action<ReferenceOwnershipBuilder> buildAction);

-        public virtual ReferenceOwnershipBuilder OwnsOne(Type ownedType, string navigationName);

+        public virtual OwnedNavigationBuilder OwnsOne(Type ownedType, string navigationName);
+        public virtual EntityTypeBuilder OwnsOne(Type ownedType, string navigationName, Action<OwnedNavigationBuilder> buildAction);
-        public virtual EntityTypeBuilder OwnsOne(Type ownedType, string navigationName, Action<ReferenceOwnershipBuilder> buildAction);

     }
     public class EntityTypeBuilder<TEntity> : EntityTypeBuilder where TEntity : class {
+        public EntityTypeBuilder(IMutableEntityType entityType);
-        public EntityTypeBuilder(InternalEntityTypeBuilder builder);

+        public virtual DiscriminatorBuilder<TDiscriminator> HasDiscriminator<TDiscriminator>(Expression<Func<TEntity, TDiscriminator>> propertyExpression);
-        public virtual IndexBuilder HasIndex(Expression<Func<TEntity, object>> indexExpression);

+        public virtual IndexBuilder<TEntity> HasIndex(Expression<Func<TEntity, object>> indexExpression);
+        public virtual new EntityTypeBuilder<TEntity> HasNoDiscriminator();
+        public virtual new EntityTypeBuilder<TEntity> HasNoKey();
-        public virtual CollectionOwnershipBuilder<TEntity, TRelatedEntity> OwnsMany<TRelatedEntity>(Expression<Func<TEntity, IEnumerable<TRelatedEntity>>> navigationExpression) where TRelatedEntity : class;

+        public virtual OwnedNavigationBuilder<TEntity, TRelatedEntity> OwnsMany<TRelatedEntity>(Expression<Func<TEntity, IEnumerable<TRelatedEntity>>> navigationExpression) where TRelatedEntity : class;
-        public virtual EntityTypeBuilder<TEntity> OwnsMany<TRelatedEntity>(Expression<Func<TEntity, IEnumerable<TRelatedEntity>>> navigationExpression, Action<CollectionOwnershipBuilder<TEntity, TRelatedEntity>> buildAction) where TRelatedEntity : class;

+        public virtual EntityTypeBuilder<TEntity> OwnsMany<TRelatedEntity>(Expression<Func<TEntity, IEnumerable<TRelatedEntity>>> navigationExpression, Action<OwnedNavigationBuilder<TEntity, TRelatedEntity>> buildAction) where TRelatedEntity : class;
-        public virtual CollectionOwnershipBuilder<TEntity, TRelatedEntity> OwnsMany<TRelatedEntity>(string navigationName) where TRelatedEntity : class;

+        public virtual OwnedNavigationBuilder<TEntity, TRelatedEntity> OwnsMany<TRelatedEntity>(string navigationName) where TRelatedEntity : class;
-        public virtual EntityTypeBuilder<TEntity> OwnsMany<TRelatedEntity>(string navigationName, Action<CollectionOwnershipBuilder<TEntity, TRelatedEntity>> buildAction) where TRelatedEntity : class;

+        public virtual EntityTypeBuilder<TEntity> OwnsMany<TRelatedEntity>(string navigationName, Action<OwnedNavigationBuilder<TEntity, TRelatedEntity>> buildAction) where TRelatedEntity : class;
-        public virtual ReferenceOwnershipBuilder<TEntity, TRelatedEntity> OwnsOne<TRelatedEntity>(Expression<Func<TEntity, TRelatedEntity>> navigationExpression) where TRelatedEntity : class;

+        public virtual OwnedNavigationBuilder<TEntity, TRelatedEntity> OwnsOne<TRelatedEntity>(Expression<Func<TEntity, TRelatedEntity>> navigationExpression) where TRelatedEntity : class;
+        public virtual EntityTypeBuilder<TEntity> OwnsOne<TRelatedEntity>(Expression<Func<TEntity, TRelatedEntity>> navigationExpression, Action<OwnedNavigationBuilder<TEntity, TRelatedEntity>> buildAction) where TRelatedEntity : class;
-        public virtual EntityTypeBuilder<TEntity> OwnsOne<TRelatedEntity>(Expression<Func<TEntity, TRelatedEntity>> navigationExpression, Action<ReferenceOwnershipBuilder<TEntity, TRelatedEntity>> buildAction) where TRelatedEntity : class;

-        public virtual ReferenceOwnershipBuilder<TEntity, TRelatedEntity> OwnsOne<TRelatedEntity>(string navigationName) where TRelatedEntity : class;

+        public virtual OwnedNavigationBuilder<TEntity, TRelatedEntity> OwnsOne<TRelatedEntity>(string navigationName) where TRelatedEntity : class;
+        public virtual EntityTypeBuilder<TEntity> OwnsOne<TRelatedEntity>(string navigationName, Action<OwnedNavigationBuilder<TEntity, TRelatedEntity>> buildAction) where TRelatedEntity : class;
-        public virtual EntityTypeBuilder<TEntity> OwnsOne<TRelatedEntity>(string navigationName, Action<ReferenceOwnershipBuilder<TEntity, TRelatedEntity>> buildAction) where TRelatedEntity : class;

+        public virtual EntityTypeBuilder<TEntity> ToQuery(Expression<Func<IQueryable<TEntity>>> query);
     }
+    public interface IConventionAnnotatableBuilder {
+        IConventionAnnotatable Metadata { get; }
+        IConventionModelBuilder ModelBuilder { get; }
+        bool CanRemoveAnnotation(string name, bool fromDataAnnotation = false);
+        bool CanSetAnnotation(string name, object value, bool fromDataAnnotation = false);
+        IConventionAnnotatableBuilder HasAnnotation(string name, object value, bool fromDataAnnotation = false);
+        IConventionAnnotatableBuilder RemoveAnnotation(string name, bool fromDataAnnotation = false);
+        IConventionAnnotatableBuilder SetOrRemoveAnnotation(string name, object value, bool fromDataAnnotation = false);
+    }
+    public interface IConventionDbFunctionBuilder {
+        IConventionDbFunction Metadata { get; }
+        bool CanSetName(string name, bool fromDataAnnotation = false);
+        bool CanSetSchema(string schema, bool fromDataAnnotation = false);
+        bool CanSetStoreType(string storeType, bool fromDataAnnotation = false);
+        bool CanSetTranslation(Func<IReadOnlyCollection<SqlExpression>, SqlExpression> translation, bool fromDataAnnotation = false);
+        bool CanSetTypeMapping(RelationalTypeMapping typeMapping, bool fromDataAnnotation = false);
+        IConventionDbFunctionBuilder HasName(string name, bool fromDataAnnotation = false);
+        IConventionDbFunctionBuilder HasSchema(string schema, bool fromDataAnnotation = false);
+        IConventionDbFunctionBuilder HasStoreType(string storeType, bool fromDataAnnotation = false);
+        IConventionDbFunctionBuilder HasTranslation(Func<IReadOnlyCollection<SqlExpression>, SqlExpression> translation, bool fromDataAnnotation = false);
+        IConventionDbFunctionBuilder HasTypeMapping(RelationalTypeMapping typeMapping, bool fromDataAnnotation = false);
+    }
+    public interface IConventionDiscriminatorBuilder {
+        bool CanSetValue(IConventionEntityType entityType, object value, bool fromDataAnnotation = false);
+        bool CanSetValue(object value, bool fromDataAnnotation = false);
+        IConventionDiscriminatorBuilder HasValue(IConventionEntityType entityType, object value, bool fromDataAnnotation = false);
+        IConventionDiscriminatorBuilder HasValue(object value, bool fromDataAnnotation = false);
+    }
+    public interface IConventionEntityTypeBuilder : IConventionAnnotatableBuilder {
+        new IConventionEntityType Metadata { get; }
+        bool CanAddNavigation(string navigationName, bool fromDataAnnotation = false);
+        bool CanIgnore(string memberName, bool fromDataAnnotation = false);
+        bool CanSetBaseType(IConventionEntityType baseEntityType, bool fromDataAnnotation = false);
+        bool CanSetChangeTrackingStrategy(Nullable<ChangeTrackingStrategy> changeTrackingStrategy, bool fromDataAnnotation = false);
+        bool CanSetDefiningQuery(LambdaExpression query, bool fromDataAnnotation = false);
+        bool CanSetDiscriminator(string name, bool fromDataAnnotation = false);
+        bool CanSetDiscriminator(Type type, bool fromDataAnnotation = false);
+        bool CanSetDiscriminator(Type type, string name, bool fromDataAnnotation = false);
+        bool CanSetPrimaryKey(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        bool CanSetPropertyAccessMode(Nullable<PropertyAccessMode> propertyAccessMode, bool fromDataAnnotation = false);
+        bool CanSetQueryFilter(LambdaExpression filter, bool fromDataAnnotation = false);
+        IReadOnlyList<IConventionProperty> GetOrCreateProperties(IEnumerable<MemberInfo> memberInfos, bool fromDataAnnotation = false);
+        IReadOnlyList<IConventionProperty> GetOrCreateProperties(IReadOnlyList<string> propertyNames, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasBaseType(IConventionEntityType baseEntityType, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasChangeTrackingStrategy(Nullable<ChangeTrackingStrategy> changeTrackingStrategy, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasDefiningQuery(LambdaExpression query, bool fromDataAnnotation = false);
+        IConventionDiscriminatorBuilder HasDiscriminator(bool fromDataAnnotation = false);
+        IConventionDiscriminatorBuilder HasDiscriminator(MemberInfo memberInfo, bool fromDataAnnotation = false);
+        IConventionDiscriminatorBuilder HasDiscriminator(string name, bool fromDataAnnotation = false);
+        IConventionDiscriminatorBuilder HasDiscriminator(string name, Type type, bool fromDataAnnotation = false);
+        IConventionDiscriminatorBuilder HasDiscriminator(Type type, bool fromDataAnnotation = false);
+        IConventionIndexBuilder HasIndex(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        IConventionKeyBuilder HasKey(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasNoDeclaredDiscriminator(bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasNoIndex(IConventionIndex index, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasNoIndex(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasNoKey(IConventionKey key, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasNoKey(bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasNoKey(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasNoRelationship(IConventionForeignKey foreignKey, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasNoRelationship(IReadOnlyList<IConventionProperty> properties, IConventionKey principalKey, IConventionEntityType principalEntityType, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasOwnership(Type targetEntityType, MemberInfo navigationToTarget, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasOwnership(Type targetEntityType, MemberInfo navigationToTarget, MemberInfo inverseNavigation, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasOwnership(Type targetEntityType, string navigationToTargetName, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasOwnership(Type targetEntityType, string navigationToTargetName, string inverseNavigationName, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder HasQueryFilter(LambdaExpression filter, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasRelationship(IConventionEntityType principalEntityType, IConventionKey principalKey, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasRelationship(IConventionEntityType targetEntityType, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasRelationship(IConventionEntityType principalEntityType, IReadOnlyList<IConventionProperty> dependentProperties, IConventionKey principalKey, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasRelationship(IConventionEntityType principalEntityType, IReadOnlyList<IConventionProperty> dependentProperties, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasRelationship(IConventionEntityType targetEntityType, MemberInfo navigationToTarget, bool setTargetAsPrincipal = false, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasRelationship(IConventionEntityType targetEntityType, MemberInfo navigationToTarget, MemberInfo inverseNavigation, bool setTargetAsPrincipal = false, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasRelationship(IConventionEntityType targetEntityType, string navigationToTargetName, bool setTargetAsPrincipal = false, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasRelationship(IConventionEntityType targetEntityType, string navigationToTargetName, string inverseNavigationName, bool setTargetAsPrincipal = false, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder Ignore(string memberName, bool fromDataAnnotation = false);
+        bool IsIgnored(string memberName, bool fromDataAnnotation = false);
+        IConventionKeyBuilder PrimaryKey(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder Property(MemberInfo memberInfo, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder Property(Type propertyType, string propertyName, bool setTypeConfigurationSource = true, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder RemoveUnusedShadowProperties(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        IConventionServicePropertyBuilder ServiceProperty(MemberInfo memberInfo, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder UsePropertyAccessMode(Nullable<PropertyAccessMode> propertyAccessMode, bool fromDataAnnotation = false);
+    }
+    public interface IConventionIndexBuilder : IConventionAnnotatableBuilder {
+        new IConventionIndex Metadata { get; }
+        bool CanSetIsUnique(Nullable<bool> unique, bool fromDataAnnotation = false);
+        IConventionIndexBuilder IsUnique(Nullable<bool> unique, bool fromDataAnnotation = false);
+    }
+    public interface IConventionKeyBuilder : IConventionAnnotatableBuilder {
+        new IConventionKey Metadata { get; }
+    }
+    public interface IConventionModelBuilder : IConventionAnnotatableBuilder {
+        new IConventionModel Metadata { get; }
+        bool CanIgnore(string typeName, bool fromDataAnnotation = false);
+        bool CanIgnore(Type type, bool fromDataAnnotation = false);
+        bool CanSetChangeTrackingStrategy(Nullable<ChangeTrackingStrategy> changeTrackingStrategy, bool fromDataAnnotation = false);
+        bool CanSetPropertyAccessMode(Nullable<PropertyAccessMode> propertyAccessMode, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder Entity(string name, Nullable<bool> shouldBeOwned = false, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder Entity(string name, string definingNavigationName, IConventionEntityType definingEntityType, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder Entity(Type type, Nullable<bool> shouldBeOwned = false, bool fromDataAnnotation = false);
+        IConventionEntityTypeBuilder Entity(Type type, string definingNavigationName, IConventionEntityType definingEntityType, bool fromDataAnnotation = false);
+        IConventionModelBuilder HasChangeTrackingStrategy(Nullable<ChangeTrackingStrategy> changeTrackingStrategy, bool fromDataAnnotation = false);
+        IConventionModelBuilder HasNoEntityType(IConventionEntityType entityType, bool fromDataAnnotation = false);
+        IConventionModelBuilder Ignore(string typeName, bool fromDataAnnotation = false);
+        IConventionModelBuilder Ignore(Type type, bool fromDataAnnotation = false);
+        bool IsIgnored(string typeName, bool fromDataAnnotation = false);
+        bool IsIgnored(Type type, bool fromDataAnnotation = false);
+        IConventionOwnedEntityTypeBuilder Owned(Type type, bool fromDataAnnotation = false);
+        IConventionModelBuilder UsePropertyAccessMode(Nullable<PropertyAccessMode> propertyAccessMode, bool fromDataAnnotation = false);
+    }
+    public interface IConventionOwnedEntityTypeBuilder
+    public interface IConventionPropertyBuilder : IConventionAnnotatableBuilder {
+        new IConventionProperty Metadata { get; }
+        IConventionPropertyBuilder AfterSave(Nullable<PropertySaveBehavior> behavior, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder BeforeSave(Nullable<PropertySaveBehavior> behavior, bool fromDataAnnotation = false);
+        bool CanSetAfterSave(Nullable<PropertySaveBehavior> behavior, bool fromDataAnnotation = false);
+        bool CanSetBeforeSave(Nullable<PropertySaveBehavior> behavior, bool fromDataAnnotation = false);
+        bool CanSetConversion(ValueConverter converter, bool fromDataAnnotation = false);
+        bool CanSetConversion(Type providerClrType, bool fromDataAnnotation = false);
+        bool CanSetField(FieldInfo fieldInfo, bool fromDataAnnotation = false);
+        bool CanSetField(string fieldName, bool fromDataAnnotation = false);
+        bool CanSetIsConcurrencyToken(Nullable<bool> concurrencyToken, bool fromDataAnnotation = false);
+        bool CanSetIsRequired(Nullable<bool> required, bool fromDataAnnotation = false);
+        bool CanSetIsUnicode(Nullable<bool> unicode, bool fromDataAnnotation = false);
+        bool CanSetKeyValueComparer(ValueComparer comparer, bool fromDataAnnotation = false);
+        bool CanSetMaxLength(Nullable<int> maxLength, bool fromDataAnnotation = false);
+        bool CanSetPropertyAccessMode(Nullable<PropertyAccessMode> propertyAccessMode, bool fromDataAnnotation = false);
+        bool CanSetStructuralValueComparer(ValueComparer comparer, bool fromDataAnnotation = false);
+        bool CanSetValueComparer(ValueComparer comparer, bool fromDataAnnotation = false);
+        bool CanSetValueGenerated(Nullable<ValueGenerated> valueGenerated, bool fromDataAnnotation = false);
+        bool CanSetValueGenerator(Func<IProperty, IEntityType, ValueGenerator> factory, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder HasConversion(ValueConverter converter, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder HasConversion(Type providerClrType, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder HasField(FieldInfo fieldInfo, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder HasField(string fieldName, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder HasKeyValueComparer(ValueComparer comparer, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder HasMaxLength(Nullable<int> maxLength, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder HasStructuralValueComparer(ValueComparer comparer, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder HasValueComparer(ValueComparer comparer, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder HasValueGenerator(Func<IProperty, IEntityType, ValueGenerator> factory, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder HasValueGenerator(Type valueGeneratorType, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder IsConcurrencyToken(Nullable<bool> concurrencyToken, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder IsRequired(Nullable<bool> required, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder IsUnicode(Nullable<bool> unicode, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder UsePropertyAccessMode(Nullable<PropertyAccessMode> propertyAccessMode, bool fromDataAnnotation = false);
+        IConventionPropertyBuilder ValueGenerated(Nullable<ValueGenerated> valueGenerated, bool fromDataAnnotation = false);
+    }
+    public interface IConventionRelationshipBuilder : IConventionAnnotatableBuilder {
+        new IConventionForeignKey Metadata { get; }
+        bool CanInvert(IReadOnlyList<IConventionProperty> newForeignKeyProperties, bool fromDataAnnotation = false);
+        bool CanSetField(FieldInfo fieldInfo, bool pointsToPrincipal, bool fromDataAnnotation = false);
+        bool CanSetField(string fieldName, bool pointsToPrincipal, bool fromDataAnnotation = false);
+        bool CanSetForeignKey(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        bool CanSetForeignKey(IReadOnlyList<string> propertyNames, bool fromDataAnnotation = false);
+        bool CanSetIsEagerLoaded(Nullable<bool> eagerLoaded, bool pointsToPrincipal, bool fromDataAnnotation = false);
+        bool CanSetIsOwnership(Nullable<bool> ownership, bool fromDataAnnotation = false);
+        bool CanSetIsRequired(Nullable<bool> required, bool fromDataAnnotation = false);
+        bool CanSetIsUnique(Nullable<bool> unique, bool fromDataAnnotation = false);
+        bool CanSetNavigation(MemberInfo property, bool pointsToPrincipal, bool fromDataAnnotation = false);
+        bool CanSetNavigation(string name, bool pointsToPrincipal, bool fromDataAnnotation = false);
+        bool CanSetNavigations(MemberInfo navigationToPrincipal, MemberInfo navigationToDependent, bool fromDataAnnotation = false);
+        bool CanSetNavigations(string navigationToPrincipalName, string navigationToDependentName, bool fromDataAnnotation = false);
+        bool CanSetOnDelete(Nullable<DeleteBehavior> deleteBehavior, bool fromDataAnnotation = false);
+        bool CanSetPrincipalKey(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        bool CanSetPrincipalKey(IReadOnlyList<string> propertyNames, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasEntityTypes(IConventionEntityType principalEntityType, IConventionEntityType dependentEntityType, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasField(FieldInfo fieldInfo, bool pointsToPrincipal, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasField(string fieldName, bool pointsToPrincipal, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasForeignKey(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasForeignKey(IReadOnlyList<string> propertyNames, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasNavigation(MemberInfo property, bool pointsToPrincipal, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasNavigation(string name, bool pointsToPrincipal, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasNavigations(MemberInfo navigationToPrincipal, MemberInfo navigationToDependent, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasNavigations(string navigationToPrincipalName, string navigationToDependentName, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasPrincipalKey(IReadOnlyList<IConventionProperty> properties, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder HasPrincipalKey(IReadOnlyList<string> propertyNames, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder IsEagerLoaded(Nullable<bool> eagerLoaded, bool pointsToPrincipal, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder IsOwnership(Nullable<bool> ownership, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder IsRequired(Nullable<bool> required, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder IsUnique(Nullable<bool> unique, bool fromDataAnnotation = false);
+        IConventionRelationshipBuilder OnDelete(Nullable<DeleteBehavior> deleteBehavior, bool fromDataAnnotation = false);
+    }
+    public interface IConventionSequenceBuilder {
+        IConventionSequence Metadata { get; }
+        bool CanSetCyclic(Nullable<bool> cyclic, bool fromDataAnnotation = false);
+        bool CanSetIncrementsBy(Nullable<int> increment, bool fromDataAnnotation = false);
+        bool CanSetMax(Nullable<long> maximum, bool fromDataAnnotation = false);
+        bool CanSetMin(Nullable<long> minimum, bool fromDataAnnotation = false);
+        bool CanSetStartsAt(Nullable<long> startValue, bool fromDataAnnotation = false);
+        bool CanSetType(Type type, bool fromDataAnnotation = false);
+        IConventionSequenceBuilder HasMax(Nullable<long> maximum, bool fromDataAnnotation = false);
+        IConventionSequenceBuilder HasMin(Nullable<long> minimum, bool fromDataAnnotation = false);
+        IConventionSequenceBuilder HasType(Type type, bool fromDataAnnotation = false);
+        IConventionSequenceBuilder IncrementsBy(Nullable<int> increment, bool fromDataAnnotation = false);
+        IConventionSequenceBuilder IsCyclic(Nullable<bool> cyclic, bool fromDataAnnotation = false);
+        IConventionSequenceBuilder StartsAt(Nullable<long> startValue, bool fromDataAnnotation = false);
+    }
+    public interface IConventionServicePropertyBuilder : IConventionAnnotatableBuilder {
+        new IConventionServiceProperty Metadata { get; }
+        bool CanSetField(FieldInfo fieldInfo, bool fromDataAnnotation = false);
+        bool CanSetField(string fieldName, bool fromDataAnnotation = false);
+        bool CanSetParameterBinding(ServiceParameterBinding parameterBinding, bool fromDataAnnotation = false);
+        IConventionServicePropertyBuilder HasField(FieldInfo fieldInfo, bool fromDataAnnotation = false);
+        IConventionServicePropertyBuilder HasField(string fieldName, bool fromDataAnnotation = false);
+        IConventionServicePropertyBuilder HasParameterBinding(ServiceParameterBinding parameterBinding, bool fromDataAnnotation = false);
+    }
-    public class IndexBuilder : IInfrastructure<IMutableModel>, IInfrastructure<InternalIndexBuilder> {
+    public class IndexBuilder : IInfrastructure<InternalIndexBuilder> {
+        public IndexBuilder(IMutableIndex index);
-        public IndexBuilder(InternalIndexBuilder builder);

-        IMutableModel Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.IMutableModel>.Instance { get; }

     }
     public class IndexBuilder<T> : IndexBuilder {
+        public IndexBuilder(IMutableIndex index);
-        public IndexBuilder(InternalIndexBuilder builder);

     }
+    public abstract class InvertibleRelationshipBuilderBase : IInfrastructure<InternalRelationshipBuilder> {
+        protected InvertibleRelationshipBuilderBase(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, IMutableForeignKey foreignKey);
+        protected InvertibleRelationshipBuilderBase(InternalRelationshipBuilder builder, InvertibleRelationshipBuilderBase oldBuilder, bool inverted = false, bool foreignKeySet = false, bool principalKeySet = false, bool requiredSet = false);
+        protected virtual InternalRelationshipBuilder Builder { get; set; }
+        protected virtual IMutableEntityType DeclaringEntityType { get; }
+        public virtual IMutableForeignKey Metadata { get; }
+        InternalRelationshipBuilder Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.Internal.InternalRelationshipBuilder>.Instance { get; }
+        protected virtual IMutableEntityType RelatedEntityType { get; }
+        public override bool Equals(object obj);
+        public override int GetHashCode();
+        public override string ToString();
+    }
-    public class KeyBuilder : IInfrastructure<IMutableModel>, IInfrastructure<InternalKeyBuilder> {
+    public class KeyBuilder : IInfrastructure<InternalKeyBuilder> {
+        public KeyBuilder(IMutableKey key);
-        public KeyBuilder(InternalKeyBuilder builder);

-        IMutableModel Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.IMutableModel>.Instance { get; }

     }
+    public class OwnedNavigationBuilder : IInfrastructure<InternalEntityTypeBuilder> {
+        public OwnedNavigationBuilder(EntityType principalEntityType, EntityType dependentEntityType, InternalRelationshipBuilder builder);
+        protected virtual InternalRelationshipBuilder Builder { get; private set; }
+        protected virtual EntityType DependentEntityType { get; }
+        public virtual IMutableForeignKey Metadata { get; }
+        InternalEntityTypeBuilder Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.Internal.InternalEntityTypeBuilder>.Instance { get; }
+        public virtual IMutableEntityType OwnedEntityType { get; }
+        protected virtual EntityType PrincipalEntityType { get; }
+        protected virtual EntityType FindRelatedEntityType(string relatedTypeName, string navigationName);
+        protected virtual EntityType FindRelatedEntityType(Type relatedType, string navigationName);
+        public virtual OwnedNavigationBuilder HasAnnotation(string annotation, object value);
+        public virtual OwnedNavigationBuilder HasChangeTrackingStrategy(ChangeTrackingStrategy changeTrackingStrategy);
+        public virtual DataBuilder HasData(params object[] data);
+        public virtual IndexBuilder HasIndex(params string[] propertyNames);
+        public virtual KeyBuilder HasKey(params string[] propertyNames);
+        public virtual ReferenceNavigationBuilder HasOne(string navigationName);
+        public virtual ReferenceNavigationBuilder HasOne(string relatedTypeName, string navigationName);
+        public virtual ReferenceNavigationBuilder HasOne(Type relatedType, string navigationName = null);
+        public virtual OwnedNavigationBuilder Ignore(string propertyName);
+        public virtual OwnedNavigationBuilder OwnsMany(string ownedTypeName, string navigationName);
+        public virtual OwnedNavigationBuilder OwnsMany(string ownedTypeName, string navigationName, Action<OwnedNavigationBuilder> buildAction);
+        public virtual OwnedNavigationBuilder OwnsMany(Type ownedType, string navigationName);
+        public virtual OwnedNavigationBuilder OwnsMany(Type ownedType, string navigationName, Action<OwnedNavigationBuilder> buildAction);
+        public virtual OwnedNavigationBuilder OwnsOne(string ownedTypeName, string navigationName);
+        public virtual OwnedNavigationBuilder OwnsOne(string ownedTypeName, string navigationName, Action<OwnedNavigationBuilder> buildAction);
+        public virtual OwnedNavigationBuilder OwnsOne(Type ownedType, string navigationName);
+        public virtual OwnedNavigationBuilder OwnsOne(Type ownedType, string navigationName, Action<OwnedNavigationBuilder> buildAction);
+        public virtual PropertyBuilder Property(string propertyName);
+        public virtual PropertyBuilder Property(Type propertyType, string propertyName);
+        public virtual PropertyBuilder<TProperty> Property<TProperty>(string propertyName);
+        protected virtual T UpdateBuilder<T>(Func<T> configure);
+        public virtual OwnedNavigationBuilder UsePropertyAccessMode(PropertyAccessMode propertyAccessMode);
+        public virtual OwnershipBuilder WithOwner(string ownerReference = null);
+    }
+    public class OwnedNavigationBuilder<TEntity, TDependentEntity> : OwnedNavigationBuilder where TEntity : class where TDependentEntity : class {
+        public OwnedNavigationBuilder(EntityType principalEntityType, EntityType dependentEntityType, InternalRelationshipBuilder builder);
+        public virtual new OwnedNavigationBuilder<TEntity, TDependentEntity> HasAnnotation(string annotation, object value);
+        public virtual new OwnedNavigationBuilder<TEntity, TDependentEntity> HasChangeTrackingStrategy(ChangeTrackingStrategy changeTrackingStrategy);
+        public virtual new DataBuilder<TDependentEntity> HasData(params object[] data);
+        public virtual DataBuilder<TDependentEntity> HasData(params TDependentEntity[] data);
+        public virtual IndexBuilder HasIndex(Expression<Func<TDependentEntity, object>> indexExpression);
+        public virtual KeyBuilder HasKey(Expression<Func<TDependentEntity, object>> keyExpression);
+        public virtual ReferenceNavigationBuilder<TDependentEntity, TNewRelatedEntity> HasOne<TNewRelatedEntity>(Expression<Func<TDependentEntity, TNewRelatedEntity>> navigationExpression = null) where TNewRelatedEntity : class;
+        public virtual ReferenceNavigationBuilder<TDependentEntity, TNewRelatedEntity> HasOne<TNewRelatedEntity>(string navigationName) where TNewRelatedEntity : class;
+        public virtual OwnedNavigationBuilder<TEntity, TDependentEntity> Ignore(Expression<Func<TDependentEntity, object>> propertyExpression);
+        public virtual new OwnedNavigationBuilder<TEntity, TDependentEntity> Ignore(string propertyName);
+        public virtual OwnedNavigationBuilder<TDependentEntity, TNewDependentEntity> OwnsMany<TNewDependentEntity>(Expression<Func<TDependentEntity, IEnumerable<TNewDependentEntity>>> navigationExpression) where TNewDependentEntity : class;
+        public virtual OwnedNavigationBuilder<TEntity, TDependentEntity> OwnsMany<TNewDependentEntity>(Expression<Func<TDependentEntity, IEnumerable<TNewDependentEntity>>> navigationExpression, Action<OwnedNavigationBuilder<TDependentEntity, TNewDependentEntity>> buildAction) where TNewDependentEntity : class;
+        public virtual OwnedNavigationBuilder<TDependentEntity, TNewDependentEntity> OwnsMany<TNewDependentEntity>(string navigationName) where TNewDependentEntity : class;
+        public virtual OwnedNavigationBuilder<TEntity, TDependentEntity> OwnsMany<TNewDependentEntity>(string navigationName, Action<OwnedNavigationBuilder<TDependentEntity, TNewDependentEntity>> buildAction) where TNewDependentEntity : class;
+        public virtual OwnedNavigationBuilder<TDependentEntity, TNewDependentEntity> OwnsOne<TNewDependentEntity>(Expression<Func<TDependentEntity, TNewDependentEntity>> navigationExpression) where TNewDependentEntity : class;
+        public virtual OwnedNavigationBuilder<TEntity, TDependentEntity> OwnsOne<TNewDependentEntity>(Expression<Func<TDependentEntity, TNewDependentEntity>> navigationExpression, Action<OwnedNavigationBuilder<TDependentEntity, TNewDependentEntity>> buildAction) where TNewDependentEntity : class;
+        public virtual OwnedNavigationBuilder<TDependentEntity, TNewDependentEntity> OwnsOne<TNewDependentEntity>(string navigationName) where TNewDependentEntity : class;
+        public virtual OwnedNavigationBuilder<TEntity, TDependentEntity> OwnsOne<TNewDependentEntity>(string navigationName, Action<OwnedNavigationBuilder<TDependentEntity, TNewDependentEntity>> buildAction) where TNewDependentEntity : class;
+        public virtual PropertyBuilder<TProperty> Property<TProperty>(Expression<Func<TDependentEntity, TProperty>> propertyExpression);
+        public virtual new OwnedNavigationBuilder<TEntity, TDependentEntity> UsePropertyAccessMode(PropertyAccessMode propertyAccessMode);
+        public virtual OwnershipBuilder<TEntity, TDependentEntity> WithOwner(Expression<Func<TDependentEntity, TEntity>> referenceExpression);
+        public virtual new OwnershipBuilder<TEntity, TDependentEntity> WithOwner(string ownerReference = null);
+    }
+    public class OwnershipBuilder : RelationshipBuilderBase {
+        public OwnershipBuilder(IMutableEntityType principalEntityType, IMutableEntityType dependentEntityType, IMutableForeignKey foreignKey);
+        protected OwnershipBuilder(InternalRelationshipBuilder builder, OwnershipBuilder oldBuilder, bool foreignKeySet = false, bool principalKeySet = false, bool requiredSet = false);
+        public virtual OwnershipBuilder HasAnnotation(string annotation, object value);
+        public virtual OwnershipBuilder HasForeignKey(params string[] foreignKeyPropertyNames);
+        public virtual OwnershipBuilder HasPrincipalKey(params string[] keyPropertyNames);
+    }
+    public class OwnershipBuilder<TEntity, TDependentEntity> : OwnershipBuilder where TEntity : class where TDependentEntity : class {
+        public OwnershipBuilder(IMutableEntityType principalEntityType, IMutableEntityType dependentEntityType, IMutableForeignKey foreignKey);
+        protected OwnershipBuilder(InternalRelationshipBuilder builder, OwnershipBuilder oldBuilder, bool foreignKeySet = false, bool principalKeySet = false, bool requiredSet = false);
+        public virtual new OwnershipBuilder<TEntity, TDependentEntity> HasAnnotation(string annotation, object value);
+        public virtual OwnershipBuilder<TEntity, TDependentEntity> HasForeignKey(Expression<Func<TDependentEntity, object>> foreignKeyExpression);
+        public virtual new OwnershipBuilder<TEntity, TDependentEntity> HasForeignKey(params string[] foreignKeyPropertyNames);
+        public virtual OwnershipBuilder<TEntity, TDependentEntity> HasPrincipalKey(Expression<Func<TEntity, object>> keyExpression);
+        public virtual new OwnershipBuilder<TEntity, TDependentEntity> HasPrincipalKey(params string[] keyPropertyNames);
+    }
-    public class PropertyBuilder : IInfrastructure<IMutableModel>, IInfrastructure<InternalPropertyBuilder> {
+    public class PropertyBuilder : IInfrastructure<InternalPropertyBuilder> {
+        public PropertyBuilder(IMutableProperty property);
-        public PropertyBuilder(InternalPropertyBuilder builder);

-        IMutableModel Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.IMutableModel>.Instance { get; }

     }
     public class PropertyBuilder<TProperty> : PropertyBuilder {
+        public PropertyBuilder(IMutableProperty property);
-        public PropertyBuilder(InternalPropertyBuilder builder);

     }
-    public class QueryTypeBuilder : IInfrastructure<IMutableModel>, IInfrastructure<InternalEntityTypeBuilder> {
 {
-        public QueryTypeBuilder(InternalEntityTypeBuilder builder);

-        public virtual IMutableEntityType Metadata { get; }

-        IMutableModel Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.IMutableModel>.Instance { get; }

-        InternalEntityTypeBuilder Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.Internal.InternalEntityTypeBuilder>.Instance { get; }

-        public override bool Equals(object obj);

-        public override int GetHashCode();

-        public virtual QueryTypeBuilder HasAnnotation(string annotation, object value);

-        public virtual QueryTypeBuilder HasBaseType(string name);

-        public virtual QueryTypeBuilder HasBaseType(Type queryType);

-        public virtual ReferenceNavigationBuilder HasOne(string relatedTypeName, string navigationName = null);

-        public virtual ReferenceNavigationBuilder HasOne(Type relatedType, string navigationName = null);

-        public virtual QueryTypeBuilder HasQueryFilter(LambdaExpression filter);

-        public virtual QueryTypeBuilder Ignore(string propertyName);

-        public virtual PropertyBuilder Property(string propertyName);

-        public virtual PropertyBuilder Property(Type propertyType, string propertyName);

-        public virtual PropertyBuilder<TProperty> Property<TProperty>(string propertyName);

-        public override string ToString();

-        public virtual QueryTypeBuilder UsePropertyAccessMode(PropertyAccessMode propertyAccessMode);

-    }
-    public class QueryTypeBuilder<TQuery> : QueryTypeBuilder where TQuery : class {
+    public class QueryTypeBuilder<TQuery> : EntityTypeBuilder<TQuery> where TQuery : class {
+        public QueryTypeBuilder(IMutableEntityType entityType);
-        public QueryTypeBuilder(InternalEntityTypeBuilder builder);

-        public virtual new QueryTypeBuilder<TQuery> HasAnnotation(string annotation, object value);

-        public virtual new QueryTypeBuilder<TQuery> HasBaseType(string name);

-        public virtual new QueryTypeBuilder<TQuery> HasBaseType(Type queryType);

-        public virtual QueryTypeBuilder<TQuery> HasBaseType<TBaseType>();

-        public virtual ReferenceNavigationBuilder<TQuery, TRelatedEntity> HasOne<TRelatedEntity>(Expression<Func<TQuery, TRelatedEntity>> navigationExpression = null) where TRelatedEntity : class;

-        public virtual QueryTypeBuilder<TQuery> HasQueryFilter(Expression<Func<TQuery, bool>> filter);

-        public virtual QueryTypeBuilder<TQuery> Ignore(Expression<Func<TQuery, object>> propertyExpression);

-        public virtual new QueryTypeBuilder<TQuery> Ignore(string propertyName);

-        public virtual PropertyBuilder<TProperty> Property<TProperty>(Expression<Func<TQuery, TProperty>> propertyExpression);

-        public virtual QueryTypeBuilder<TQuery> ToQuery(Expression<Func<IQueryable<TQuery>>> query);

-        public virtual new QueryTypeBuilder<TQuery> UsePropertyAccessMode(PropertyAccessMode propertyAccessMode);

     }
-    public class ReferenceCollectionBuilder : ReferenceCollectionBuilderBase {
+    public class ReferenceCollectionBuilder : RelationshipBuilderBase {
+        public ReferenceCollectionBuilder(IMutableEntityType principalEntityType, IMutableEntityType dependentEntityType, IMutableForeignKey foreignKey);
-        public ReferenceCollectionBuilder(EntityType principalEntityType, EntityType dependentEntityType, InternalRelationshipBuilder builder);

+        protected virtual InternalRelationshipBuilder HasForeignKeyBuilder(IReadOnlyList<MemberInfo> foreignKeyProperties);
-        protected virtual InternalRelationshipBuilder HasForeignKeyBuilder(IReadOnlyList<PropertyInfo> foreignKeyProperties);

+        protected virtual InternalRelationshipBuilder HasPrincipalKeyBuilder(IReadOnlyList<MemberInfo> keyProperties);
-        protected virtual InternalRelationshipBuilder HasPrincipalKeyBuilder(IReadOnlyList<PropertyInfo> keyProperties);

     }
     public class ReferenceCollectionBuilder<TPrincipalEntity, TDependentEntity> : ReferenceCollectionBuilder where TPrincipalEntity : class where TDependentEntity : class {
+        public ReferenceCollectionBuilder(IMutableEntityType principalEntityType, IMutableEntityType dependentEntityType, IMutableForeignKey foreignKey);
-        public ReferenceCollectionBuilder(EntityType principalEntityType, EntityType dependentEntityType, InternalRelationshipBuilder builder);

     }
-    public class ReferenceCollectionBuilderBase : IInfrastructure<IMutableModel>, IInfrastructure<InternalRelationshipBuilder> {
 {
-        public ReferenceCollectionBuilderBase(EntityType principalEntityType, EntityType dependentEntityType, InternalRelationshipBuilder builder);

-        protected ReferenceCollectionBuilderBase(InternalRelationshipBuilder builder, ReferenceCollectionBuilderBase oldBuilder, bool foreignKeySet = false, bool principalKeySet = false, bool requiredSet = false);

-        protected virtual InternalRelationshipBuilder Builder { get; set; }

-        protected virtual EntityType DependentEntityType { get; }

-        public virtual IMutableForeignKey Metadata { get; }

-        IMutableModel Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.IMutableModel>.Instance { get; }

-        InternalRelationshipBuilder Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.Internal.InternalRelationshipBuilder>.Instance { get; }

-        protected virtual EntityType PrincipalEntityType { get; }

-        public override bool Equals(object obj);

-        public override int GetHashCode();

-        public override string ToString();

-    }
     public class ReferenceNavigationBuilder : IInfrastructure<InternalRelationshipBuilder> {
+        public ReferenceNavigationBuilder(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, MemberInfo navigationMemberInfo, IMutableForeignKey foreignKey);
+        public ReferenceNavigationBuilder(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, string navigationName, IMutableForeignKey foreignKey);
-        public ReferenceNavigationBuilder(EntityType declaringEntityType, EntityType relatedEntityType, PropertyInfo navigationProperty, InternalRelationshipBuilder builder);

-        public ReferenceNavigationBuilder(EntityType declaringEntityType, EntityType relatedEntityType, string navigationName, InternalRelationshipBuilder builder);

-        protected virtual EntityType DeclaringEntityType { get; }
+        protected virtual IMutableEntityType DeclaringEntityType { get; }
+        protected virtual MemberInfo ReferenceMember { get; }
-        protected virtual PropertyInfo ReferenceProperty { get; }

-        protected virtual EntityType RelatedEntityType { get; }
+        protected virtual IMutableEntityType RelatedEntityType { get; }
+        protected virtual InternalRelationshipBuilder WithManyBuilder(MemberInfo navigationMemberInfo);
-        protected virtual InternalRelationshipBuilder WithManyBuilder(PropertyInfo navigationProperty);

+        protected virtual InternalRelationshipBuilder WithOneBuilder(MemberInfo navigationMemberInfo);
-        protected virtual InternalRelationshipBuilder WithOneBuilder(PropertyInfo navigationProperty);

     }
     public class ReferenceNavigationBuilder<TEntity, TRelatedEntity> : ReferenceNavigationBuilder where TEntity : class where TRelatedEntity : class {
+        public ReferenceNavigationBuilder(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, MemberInfo navigationMemberInfo, IMutableForeignKey foreignKey);
+        public ReferenceNavigationBuilder(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, string navigationName, IMutableForeignKey foreignKey);
-        public ReferenceNavigationBuilder(EntityType declaringEntityType, EntityType relatedEntityType, PropertyInfo navigationProperty, InternalRelationshipBuilder builder);

-        public ReferenceNavigationBuilder(EntityType declaringEntityType, EntityType relatedEntityType, string navigationName, InternalRelationshipBuilder builder);

     }
-    public class ReferenceOwnershipBuilder : ReferenceReferenceBuilderBase, IInfrastructure<InternalEntityTypeBuilder> {
 {
-        public ReferenceOwnershipBuilder(EntityType declaringEntityType, EntityType relatedEntityType, InternalRelationshipBuilder builder);

-        protected ReferenceOwnershipBuilder(InternalRelationshipBuilder builder, ReferenceOwnershipBuilder oldBuilder, bool inverted = false, bool foreignKeySet = false, bool principalKeySet = false, bool requiredSet = false);

-        InternalEntityTypeBuilder Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.Internal.InternalEntityTypeBuilder>.Instance { get; }

-        public virtual IMutableEntityType OwnedEntityType { get; }

-        protected virtual EntityType FindRelatedEntityType(string relatedTypeName, string navigationName);

-        protected virtual EntityType FindRelatedEntityType(Type relatedType, string navigationName);

-        public virtual ReferenceOwnershipBuilder HasChangeTrackingStrategy(ChangeTrackingStrategy changeTrackingStrategy);

-        public virtual DataBuilder HasData(params object[] data);

-        public virtual ReferenceOwnershipBuilder HasEntityTypeAnnotation(string annotation, object value);

-        public virtual ReferenceOwnershipBuilder HasForeignKey(params string[] foreignKeyPropertyNames);

-        public virtual ReferenceOwnershipBuilder HasForeignKeyAnnotation(string annotation, object value);

-        public virtual IndexBuilder HasIndex(params string[] propertyNames);

-        public virtual KeyBuilder HasKey(params string[] propertyNames);

-        public virtual CollectionNavigationBuilder HasMany(string relatedTypeName, string navigationName = null);

-        public virtual CollectionNavigationBuilder HasMany(Type relatedType, string navigationName = null);

-        public virtual ReferenceNavigationBuilder HasOne(string relatedTypeName, string navigationName = null);

-        public virtual ReferenceNavigationBuilder HasOne(Type relatedType, string navigationName = null);

-        public virtual ReferenceOwnershipBuilder HasPrincipalKey(params string[] keyPropertyNames);

-        public virtual ReferenceOwnershipBuilder Ignore(string propertyName);

-        public virtual ReferenceOwnershipBuilder OnDelete(DeleteBehavior deleteBehavior);

-        public virtual CollectionOwnershipBuilder OwnsMany(string ownedTypeName, string navigationName);

-        public virtual ReferenceOwnershipBuilder OwnsMany(string ownedTypeName, string navigationName, Action<CollectionOwnershipBuilder> buildAction);

-        public virtual CollectionOwnershipBuilder OwnsMany(Type ownedType, string navigationName);

-        public virtual ReferenceOwnershipBuilder OwnsMany(Type ownedType, string navigationName, Action<CollectionOwnershipBuilder> buildAction);

-        public virtual ReferenceOwnershipBuilder OwnsOne(string ownedTypeName, string navigationName);

-        public virtual ReferenceOwnershipBuilder OwnsOne(string ownedTypeName, string navigationName, Action<ReferenceOwnershipBuilder> buildAction);

-        public virtual ReferenceOwnershipBuilder OwnsOne(Type ownedType, string navigationName);

-        public virtual ReferenceOwnershipBuilder OwnsOne(Type ownedType, string navigationName, Action<ReferenceOwnershipBuilder> buildAction);

-        public virtual PropertyBuilder Property(string propertyName);

-        public virtual PropertyBuilder Property(Type propertyType, string propertyName);

-        public virtual PropertyBuilder<TProperty> Property<TProperty>(string propertyName);

-        public virtual ReferenceOwnershipBuilder UsePropertyAccessMode(PropertyAccessMode propertyAccessMode);

-    }
-    public class ReferenceOwnershipBuilder<TEntity, TRelatedEntity> : ReferenceOwnershipBuilder where TEntity : class where TRelatedEntity : class {
 {
-        public ReferenceOwnershipBuilder(EntityType declaringEntityType, EntityType relatedEntityType, InternalRelationshipBuilder builder);

-        protected ReferenceOwnershipBuilder(InternalRelationshipBuilder builder, ReferenceOwnershipBuilder oldBuilder, bool inverted = false, bool foreignKeySet = false, bool principalKeySet = false, bool requiredSet = false);

-        public virtual new ReferenceOwnershipBuilder<TEntity, TRelatedEntity> HasChangeTrackingStrategy(ChangeTrackingStrategy changeTrackingStrategy);

-        public virtual new DataBuilder<TRelatedEntity> HasData(params object[] data);

-        public virtual DataBuilder<TRelatedEntity> HasData(params TRelatedEntity[] data);

-        public virtual new ReferenceOwnershipBuilder<TEntity, TRelatedEntity> HasEntityTypeAnnotation(string annotation, object value);

-        public virtual ReferenceOwnershipBuilder<TEntity, TRelatedEntity> HasForeignKey(Expression<Func<TRelatedEntity, object>> foreignKeyExpression);

-        public virtual new ReferenceOwnershipBuilder<TEntity, TRelatedEntity> HasForeignKey(params string[] foreignKeyPropertyNames);

-        public virtual new ReferenceOwnershipBuilder<TEntity, TRelatedEntity> HasForeignKeyAnnotation(string annotation, object value);

-        public virtual IndexBuilder HasIndex(Expression<Func<TRelatedEntity, object>> indexExpression);

-        public virtual KeyBuilder HasKey(Expression<Func<TRelatedEntity, object>> keyExpression);

-        public virtual CollectionNavigationBuilder<TRelatedEntity, TNewRelatedEntity> HasMany<TNewRelatedEntity>(Expression<Func<TRelatedEntity, IEnumerable<TNewRelatedEntity>>> navigationExpression = null) where TNewRelatedEntity : class;

-        public virtual ReferenceNavigationBuilder<TRelatedEntity, TNewRelatedEntity> HasOne<TNewRelatedEntity>(Expression<Func<TRelatedEntity, TNewRelatedEntity>> navigationExpression = null) where TNewRelatedEntity : class;

-        public virtual ReferenceNavigationBuilder<TRelatedEntity, TNewRelatedEntity> HasOne<TNewRelatedEntity>(string navigationName) where TNewRelatedEntity : class;

-        public virtual ReferenceOwnershipBuilder<TEntity, TRelatedEntity> HasPrincipalKey(Expression<Func<TEntity, object>> keyExpression);

-        public virtual new ReferenceOwnershipBuilder<TEntity, TRelatedEntity> HasPrincipalKey(params string[] keyPropertyNames);

-        public virtual ReferenceOwnershipBuilder<TEntity, TRelatedEntity> Ignore(Expression<Func<TRelatedEntity, object>> propertyExpression);

-        public virtual new ReferenceOwnershipBuilder<TEntity, TRelatedEntity> Ignore(string propertyName);

-        public virtual new ReferenceOwnershipBuilder<TEntity, TRelatedEntity> OnDelete(DeleteBehavior deleteBehavior);

-        public virtual CollectionOwnershipBuilder<TRelatedEntity, TDependentEntity> OwnsMany<TDependentEntity>(Expression<Func<TRelatedEntity, IEnumerable<TDependentEntity>>> navigationExpression) where TDependentEntity : class;

-        public virtual ReferenceOwnershipBuilder<TEntity, TRelatedEntity> OwnsMany<TDependentEntity>(Expression<Func<TRelatedEntity, IEnumerable<TDependentEntity>>> navigationExpression, Action<CollectionOwnershipBuilder<TRelatedEntity, TDependentEntity>> buildAction) where TDependentEntity : class;

-        public virtual CollectionOwnershipBuilder<TRelatedEntity, TDependentEntity> OwnsMany<TDependentEntity>(string navigationName) where TDependentEntity : class;

-        public virtual ReferenceOwnershipBuilder<TEntity, TRelatedEntity> OwnsMany<TDependentEntity>(string navigationName, Action<CollectionOwnershipBuilder<TRelatedEntity, TDependentEntity>> buildAction) where TDependentEntity : class;

-        public virtual ReferenceOwnershipBuilder<TRelatedEntity, TNewRelatedEntity> OwnsOne<TNewRelatedEntity>(Expression<Func<TRelatedEntity, TNewRelatedEntity>> navigationExpression) where TNewRelatedEntity : class;

-        public virtual ReferenceOwnershipBuilder<TEntity, TRelatedEntity> OwnsOne<TNewRelatedEntity>(Expression<Func<TRelatedEntity, TNewRelatedEntity>> navigationExpression, Action<ReferenceOwnershipBuilder<TRelatedEntity, TNewRelatedEntity>> buildAction) where TNewRelatedEntity : class;

-        public virtual ReferenceOwnershipBuilder<TRelatedEntity, TNewRelatedEntity> OwnsOne<TNewRelatedEntity>(string navigationName) where TNewRelatedEntity : class;

-        public virtual ReferenceOwnershipBuilder<TEntity, TRelatedEntity> OwnsOne<TNewRelatedEntity>(string navigationName, Action<ReferenceOwnershipBuilder<TRelatedEntity, TNewRelatedEntity>> buildAction) where TNewRelatedEntity : class;

-        public virtual PropertyBuilder<TProperty> Property<TProperty>(Expression<Func<TRelatedEntity, TProperty>> propertyExpression);

-        public virtual new ReferenceOwnershipBuilder<TEntity, TRelatedEntity> UsePropertyAccessMode(PropertyAccessMode propertyAccessMode);

-    }
-    public class ReferenceReferenceBuilder : ReferenceReferenceBuilderBase {
+    public class ReferenceReferenceBuilder : InvertibleRelationshipBuilderBase {
+        public ReferenceReferenceBuilder(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, IMutableForeignKey foreignKey);
-        public ReferenceReferenceBuilder(EntityType declaringEntityType, EntityType relatedEntityType, InternalRelationshipBuilder builder);

+        protected virtual InternalRelationshipBuilder HasForeignKeyBuilder(EntityType dependentEntityType, string dependentEntityTypeName, IReadOnlyList<MemberInfo> foreignKeyProperties);
-        protected virtual InternalRelationshipBuilder HasForeignKeyBuilder(EntityType dependentEntityType, string dependentEntityTypeName, IReadOnlyList<PropertyInfo> foreignKeyProperties);

+        protected virtual InternalRelationshipBuilder HasPrincipalKeyBuilder(EntityType principalEntityType, string principalEntityTypeName, IReadOnlyList<MemberInfo> foreignKeyProperties);
-        protected virtual InternalRelationshipBuilder HasPrincipalKeyBuilder(EntityType principalEntityType, string principalEntityTypeName, IReadOnlyList<PropertyInfo> foreignKeyProperties);

     }
     public class ReferenceReferenceBuilder<TEntity, TRelatedEntity> : ReferenceReferenceBuilder where TEntity : class where TRelatedEntity : class {
+        public ReferenceReferenceBuilder(IMutableEntityType declaringEntityType, IMutableEntityType relatedEntityType, IMutableForeignKey foreignKey);
-        public ReferenceReferenceBuilder(EntityType declaringEntityType, EntityType relatedEntityType, InternalRelationshipBuilder builder);

     }
-    public class ReferenceReferenceBuilderBase : IInfrastructure<IMutableModel>, IInfrastructure<InternalRelationshipBuilder> {
 {
-        public ReferenceReferenceBuilderBase(EntityType declaringEntityType, EntityType relatedEntityType, InternalRelationshipBuilder builder);

-        protected ReferenceReferenceBuilderBase(InternalRelationshipBuilder builder, ReferenceReferenceBuilderBase oldBuilder, bool inverted = false, bool foreignKeySet = false, bool principalKeySet = false, bool requiredSet = false);

-        protected virtual InternalRelationshipBuilder Builder { get; set; }

-        protected virtual EntityType DeclaringEntityType { get; }

-        public virtual IMutableForeignKey Metadata { get; }

-        IMutableModel Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.IMutableModel>.Instance { get; }

-        InternalRelationshipBuilder Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.Internal.InternalRelationshipBuilder>.Instance { get; }

-        protected virtual EntityType RelatedEntityType { get; }

-        public override bool Equals(object obj);

-        public override int GetHashCode();

-        public override string ToString();

-    }
+    public abstract class RelationshipBuilderBase : IInfrastructure<InternalRelationshipBuilder> {
+        protected RelationshipBuilderBase(IMutableEntityType principalEntityType, IMutableEntityType dependentEntityType, IMutableForeignKey foreignKey);
+        protected RelationshipBuilderBase(InternalRelationshipBuilder builder, RelationshipBuilderBase oldBuilder, bool foreignKeySet = false, bool principalKeySet = false, bool requiredSet = false);
+        protected virtual InternalRelationshipBuilder Builder { get; set; }
+        protected virtual IMutableEntityType DependentEntityType { get; }
+        public virtual IMutableForeignKey Metadata { get; }
+        InternalRelationshipBuilder Microsoft.EntityFrameworkCore.Infrastructure.IInfrastructure<Microsoft.EntityFrameworkCore.Metadata.Internal.InternalRelationshipBuilder>.Instance { get; }
+        protected virtual IMutableEntityType PrincipalEntityType { get; }
+        public override bool Equals(object obj);
+        public override int GetHashCode();
+        public override string ToString();
+    }
+    public class SequenceBuilder : IConventionSequenceBuilder {
+        public SequenceBuilder(IMutableSequence sequence);
+        public virtual IMutableSequence Metadata { get; }
+        IConventionSequence Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.Metadata { get; }
+        public override bool Equals(object obj);
+        public override int GetHashCode();
+        public virtual SequenceBuilder HasMax(long maximum);
+        public virtual SequenceBuilder HasMin(long minimum);
+        public virtual SequenceBuilder IncrementsBy(int increment);
+        public virtual SequenceBuilder IsCyclic(bool cyclic = true);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.CanSetCyclic(Nullable<bool> cyclic, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.CanSetIncrementsBy(Nullable<int> increment, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.CanSetMax(Nullable<long> maximum, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.CanSetMin(Nullable<long> minimum, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.CanSetStartsAt(Nullable<long> startValue, bool fromDataAnnotation);
+        bool Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.CanSetType(Type type, bool fromDataAnnotation);
+        IConventionSequenceBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.HasMax(Nullable<long> maximum, bool fromDataAnnotation);
+        IConventionSequenceBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.HasMin(Nullable<long> minimum, bool fromDataAnnotation);
+        IConventionSequenceBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.HasType(Type type, bool fromDataAnnotation);
+        IConventionSequenceBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.IncrementsBy(Nullable<int> increment, bool fromDataAnnotation);
+        IConventionSequenceBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.IsCyclic(Nullable<bool> cyclic, bool fromDataAnnotation);
+        IConventionSequenceBuilder Microsoft.EntityFrameworkCore.Metadata.Builders.IConventionSequenceBuilder.StartsAt(Nullable<long> startValue, bool fromDataAnnotation);
+        public virtual SequenceBuilder StartsAt(long startValue);
+        public override string ToString();
+    }
 }
```

