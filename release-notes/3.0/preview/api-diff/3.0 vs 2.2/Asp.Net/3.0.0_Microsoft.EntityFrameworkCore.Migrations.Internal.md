# Microsoft.EntityFrameworkCore.Migrations.Internal

``` diff
 namespace Microsoft.EntityFrameworkCore.Migrations.Internal {
     public class MigrationsAssembly : IMigrationsAssembly {
+        public MigrationsAssembly(ICurrentDbContext currentContext, IDbContextOptions options, IMigrationsIdGenerator idGenerator, IDiagnosticsLogger<DbLoggerCategory.Migrations> logger);
-        public MigrationsAssembly(ICurrentDbContext currentContext, IDbContextOptions options, IMigrationsIdGenerator idGenerator, IDiagnosticsLogger<DbLoggerCategory.Migrations> logger);

     }
     public class MigrationsModelDiffer : IMigrationsModelDiffer {
-        public MigrationsModelDiffer(IRelationalTypeMappingSource typeMappingSource, IMigrationsAnnotationProvider migrationsAnnotations, IChangeDetector changeDetector, StateManagerDependencies stateManagerDependencies, CommandBatchPreparerDependencies commandBatchPreparerDependencies);

+        public MigrationsModelDiffer(IRelationalTypeMappingSource typeMappingSource, IMigrationsAnnotationProvider migrationsAnnotations, IChangeDetector changeDetector, IUpdateAdapterFactory updateAdapterFactory, CommandBatchPreparerDependencies commandBatchPreparerDependencies);
-        protected virtual StateManagerDependencies StateManagerDependencies { get; }

+        protected virtual IUpdateAdapterFactory UpdateAdapterFactory { get; }
+        protected virtual IEnumerable<MigrationOperation> Add(ICheckConstraint target, MigrationsModelDiffer.DiffContext diffContext);
+        protected virtual IEnumerable<MigrationOperation> Diff(ICheckConstraint source, ICheckConstraint target, MigrationsModelDiffer.DiffContext diffContext);
+        protected virtual IEnumerable<MigrationOperation> Diff(IEnumerable<ICheckConstraint> source, IEnumerable<ICheckConstraint> target, MigrationsModelDiffer.DiffContext diffContext);
-        protected virtual IEnumerable<MigrationOperation> GetDataOperations();

+        protected virtual IEnumerable<MigrationOperation> GetDataOperations(MigrationsModelDiffer.DiffContext diffContext);
+        protected virtual IEnumerable<MigrationOperation> Remove(ICheckConstraint source, MigrationsModelDiffer.DiffContext diffContext);
         protected class DiffContext {
+            public virtual T FindTarget<T>(T source);
         }
     }
     public class Migrator : IMigrator {
-        public Migrator(IMigrationsAssembly migrationsAssembly, IHistoryRepository historyRepository, IDatabaseCreator databaseCreator, IMigrationsSqlGenerator migrationsSqlGenerator, IRawSqlCommandBuilder rawSqlCommandBuilder, IMigrationCommandExecutor migrationCommandExecutor, IRelationalConnection connection, ISqlGenerationHelper sqlGenerationHelper, IDiagnosticsLogger<DbLoggerCategory.Migrations> logger, IDatabaseProvider databaseProvider);

+        public Migrator(IMigrationsAssembly migrationsAssembly, IHistoryRepository historyRepository, IDatabaseCreator databaseCreator, IMigrationsSqlGenerator migrationsSqlGenerator, IRawSqlCommandBuilder rawSqlCommandBuilder, IMigrationCommandExecutor migrationCommandExecutor, IRelationalConnection connection, ISqlGenerationHelper sqlGenerationHelper, ICurrentDbContext currentContext, IDiagnosticsLogger<DbLoggerCategory.Migrations> logger, IDiagnosticsLogger<DbLoggerCategory.Database.Command> commandLogger, IDatabaseProvider databaseProvider);
     }
 }
```

